<?xml version="1.0" encoding="utf-8" ?>
<Suite Category="ASO" Title="Apptweak" Id="Apptweak" RequireVersion="7.0.0" SourceUrl="https://github.com/nielsbosma/SeoTools-for-Excel-Connectors/blob/master/Apptweak.xml" HelpUrl="http://seotoolsforexcel.com/apptweak/" HelpText="Documentation">

  <Author Name="Victor Sandberg" Url="http://community.seotoolsforexcel.com/users/diskborste/activity" />

  <Settings HelpText="What's this?" HelpUrl="http://seotoolsforexcel.com/apptweak/">
    <Text Id="ApiToken" Title="API Token" Required="true" HelpUrl="http://seotoolsforexcel.com/apptweak/"/>
  </Settings>

  <Resources>
    <Resource Id="Header">
      <HttpSettings>
        <RequestHeaders>
          <Header Name='X-Apptweak-Key'>@Model.ApiToken</Header>
        </RequestHeaders>
      </HttpSettings>
    </Resource>
    <Resource Id="Error">
      <Fail>
        <JsonPath Expr="error" Id="Error"/>
      </Fail>
    </Resource>
  </Resources>

  <RestConnector Id="iOSCountries" Hidden="true">
    <Fetch Url="https://www.apptweak.io/documentation/ios/misc_countrycodes"/>
    <Parse>
      <XPath Expr="//*[@@id='misc']//div[1]/table/tbody/tr">
        <XPath Expr="td[2]" Id="Id"/>
        <XPath Expr="td[1]" Id="Country"/>
      </XPath>
    </Parse>
  </RestConnector>

  <RestConnector Id="AndroidCountries" Hidden="true">
    <Fetch Url="https://www.apptweak.io/documentation/android/misc_countrycodes"/>
    <Parse>
      <XPath Expr="//*[@@id='misc']//div[1]/table/tbody/tr">
        <XPath Expr="td[2]" Id="Id"/>
        <XPath Expr="td[1]" Id="Country"/>
      </XPath>
    </Parse>
  </RestConnector>

  <RestConnector Id="iOSCategories" Hidden="true">
    <Fetch Url="https://www.apptweak.io/documentation/ios/misc_categories"/>
    <Parse>
      <XPath Expr="//table[@@id='misc-countries-table']/tbody/tr">
        <XPath Expr="td[2]" Id="Id"/>
        <XPath Expr="td[1]" Id="Category"/>
      </XPath>
    </Parse>
  </RestConnector>

  <RestConnector Id="AndroidCategories" Hidden="true">
    <Fetch Url="https://www.apptweak.io/documentation/android/misc_categories"/>
    <Parse>
      <XPath Expr="//table[@@id='misc-countries-table']/tbody/tr">
        <XPath Expr="td[2]" Id="Id"/>
        <XPath Expr="td[1]" Id="Category"/>
      </XPath>
    </Parse>
  </RestConnector>

  <RestConnector Id="iOSLanguages" Hidden="true">
    <Parameters>
      <Text Id="Country" Required="true" Debug.DefaultValue="be" Select.Connector="iOSCountries" Select.IdField="Id" Select.TitleField="Country"/>
    </Parameters>
    <Fetch Url="https://www.apptweak.io/documentation/ios/misc_countrycodes"/>
    <Parse>
      <Regex Expr="(?&#x3C;=&#x3C;td\&#x3E;@(Model.Country)\&#x3C;\/td\&#x3E;\r?\n\&#x3C;td\&#x3E;[a-z,\s]*)[a-z]{2}" Group="0" CaseSensitive="True">
				<Regex Expr=".+" Group="0" Id="Id"/>
			</Regex>
    </Parse>
  </RestConnector>

  <RestConnector Id="AndroidLanguages" Hidden="true">
    <Parameters>
      <Text Id="Country" Required="true" Debug.DefaultValue="be" Select.Connector="AndroidCountries" Select.IdField="Id" Select.TitleField="Country"/>
    </Parameters>
    <Fetch Url="https://www.apptweak.io/documentation/android/misc_countrycodes"/>
    <Parse>
      <Regex Expr="(?&#x3C;=&#x3C;td\&#x3E;@(Model.Country)\&#x3C;\/td\&#x3E;\r?\n\&#x3C;td\&#x3E;[a-z,\s]*)[a-z]{2}" Group="0" CaseSensitive="True">
				<Regex Expr=".+" Group="0" Id="Id"/>
			</Regex>
    </Parse>
  </RestConnector>

  <RestConnector Id="iOSAppInformation" Title="iOS App Information" HelpText="Returns detailed metadata about an app." HelpUrl="https://apptweak.io/api/ios#get-application">
    <Parameters>
      <Text Id="AppId" Title="App Id" DefaultValue="" Required="true" Debug.DefaultValue="880047117"/>
      <Text Id="Country" Title="Country" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSCountries" Select.IdField="Id" Select.TitleField="Country" HelpText="The two letter country code you want to fetch the application in."/>
      <Text Id="Language" Title="Language (Two-letter Code)" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSLanguages" Select.IdField="Id" Select.TitleField="Id" HelpText="The two letter language you want to fetch the application in."/>
      <Select Id="Device" Title="Device" Required="false" DefaultValue="iphone" HelpText="The device you want to fetch the application for.">
        <DataSource>
					<Item Id="iphone" Title="iPhone"/>
					<Item Id="ipad" Title="iPad"/>
        </DataSource>
      </Select>
    </Parameters>
    <Fetch>
      <Resource Id="Header"/>
      <Fetch.Url>
        <![CDATA[
        https://api.apptweak.com/ios/applications/@(Model.AppId).json
				?language=@(Model.Language)
				&country=@(Model.Country)
				&device=@(Model.Device)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
			<JsonPath Expr="content.application_id" Id="Id" Converter="Int" HelpText="The ID that Apple has given to the application."/>
			<JsonPath Expr="content.store_info.title" Id="Title" Converter="String" HelpText="The App name as it appears on the App Store, in the chosen language."/>
			<JsonPath Expr="content.store_info.slug" Id="Slug" Converter="String" HelpText="URL friendly version of the app name."/>
			<JsonPath Expr="content.store_info.description" Id="Description" Converter="String" HelpText="The app description as it appears on the App Store, in the chosen language."/>
			<JsonPath Expr="content.store_info.subtitle" Id="Subtitle" Converter="String" HelpText=""/>
			<JsonPath Expr="content.store_info.promotionalText" Id="PromotionalText" Converter="String" HelpText=""/>
			<JsonPath Expr="content.store_info.versions[0].version" Id="Version" Converter="String" HelpText=""/>
			<JsonPath Expr="content.store_info.price" Id="Price" Converter="String" HelpText="The price of the application as displayed on the App Store"/>
			<Compute Id="Devices" Converter="Auto" DefaultValue="" HelpText="The list of devices the app is available on.">
				<Compute.Expr>
					<![CDATA[@Regex.Replace(Model.Inp, @"[""\[\]\r\n]", "")]]>
				</Compute.Expr>
				<JsonPath Expr="content.store_info.devices" Id="Inp" DefaultValue=""/>
			</Compute>
			<JsonPath Expr="content.developer.id" Id="DeveloperId" Converter="Long" HelpText="The application developer id."/>
			<JsonPath Expr="content.developer.name" Id="DeveloperName" Converter="String" HelpText="The application developer name."/>
			<JsonPath Expr="content.store_info.release_date" Id="ReleaseDate" Converter="DateTime" Converter.SourceFormat="yyyy-MM-dd hh:mm:ss UTC" HelpText=""/>
			<JsonPath Expr="content.store_info.size.current.data" Id="Size" Converter="Long" HelpText=""/>
			<Compute Id="Categories" Converter="Auto" DefaultValue="" HelpText="The list of category the app is listed on.">
				<Compute.Expr>
					<![CDATA[@Regex.Replace(Model.Inp, @"[""\[\]\r\n]", "")]]>
				</Compute.Expr>
				<JsonPath Expr="content.store_info.genres" Id="Inp" DefaultValue=""/>
			</Compute>
			<JsonPath Expr="content.store_info.features.game_center" Id="GameCenter" Converter="Bool" HelpText=""/>
			<JsonPath Expr="content.store_info.features.passbook" Id="Passbook" Converter="Bool" HelpText=""/>
			<JsonPath Expr="content.store_info.features.in_apps" Id="InApps" Converter="Bool" HelpText=""/>
			<JsonPath Expr="content.store_info.icon" Id="Icon" Converter="String" HelpText="The URL of the icon as it appears on the App Store."/>
    </Parse>
    <Resource Id="Error"/>
  </RestConnector>

  <RestConnector Id="AndroidAppInformation" Title="Android App Information" HelpText="Returns detailed metadata about an app." HelpUrl="https://www.apptweak.io/documentation/android/application_metadata">
    <Parameters>
      <Text Id="AppId" Title="App Id" DefaultValue="" Required="true" Debug.DefaultValue="com.facebook.katana"/>
      <Text Id="Country" Title="Country" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="AndroidCountries" Select.IdField="Id" Select.TitleField="Country" HelpText="The two letter country code you want to fetch the application in."/>
      <Text Id="Language" Title="Language (Two-letter Code)" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="AndroidLanguages" Select.IdField="Id" Select.TitleField="Id" HelpText="The two letter language you want to fetch the application in."/>
    </Parameters>
    <Fetch>
      <Resource Id="Header"/>
      <Fetch.Url>
        <![CDATA[
        https://api.apptweak.com/android/applications/@(Model.AppId).json
				?language=@(Model.Language)
				&country=@(Model.Country)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
			<JsonPath Expr="content.application_id" Id="Id" Converter="String" HelpText=""/>
			<JsonPath Expr="content.store_info.title" Id="Title" Converter="String" HelpText=""/>
			<JsonPath Expr="content.store_info.slug" Id="Slug" Converter="String" HelpText=""/>
			<JsonPath Expr="content.store_info.short_description" Id="ShortDescription" Converter="String" HelpText=""/>
			<JsonPath Expr="content.store_info.description" Id="Description" Converter="String" HelpText=""/>
			<JsonPath Expr="content.store_info.content_rating" Id="ContentRating" Converter="String" HelpText=""/>
			<JsonPath Expr="content.store_info.versions[0].version" Id="Version" Converter="String" HelpText=""/>
			<JsonPath Expr="content.store_info.versions[0].release_date" Id="RelaseDate" Converter="Auto" HelpText="" DefaultValue=""/>
			<JsonPath Expr="content.store_info.price" Id="Price" Converter="String" HelpText=""/>
			<JsonPath Expr="content.developer.name" Id="DeveloperName" Converter="String" HelpText=""/>
			<JsonPath Expr="content.developer.email" Id="DeveloperEmail" Converter="String" HelpText=""/>
			<JsonPath Expr="content.developer.website" Id="DeveloperWebsite" Converter="String" HelpText=""/>
			<JsonPath Expr="content.store_info.size.current.data" Id="Size" Converter="Long" HelpText=""/>
			<Compute Id="Genres" Converter="Auto" DefaultValue="" HelpText="The list of category the app is listed on.">
				<Compute.Expr>
					<![CDATA[@Regex.Replace(Model.Inp, @"[""\[\]\r\n]", "")]]>
				</Compute.Expr>
				<JsonPath Expr="content.store_info.genres" Id="Inp" DefaultValue=""/>
			</Compute>
			<JsonPath Expr="content.store_info.icon" Id="Icon" Converter="String" HelpText=""/>
    </Parse>
    <Resource Id="Error"/>
  </RestConnector>

  <RestConnector Id="iOSAppReviews" Title="iOS App Reviews" HelpText="Returns reviews about the app posted within the last 30 days." HelpUrl="https://apptweak.io/api/ios#get-application">
    <Parameters>
      <Text Id="AppId" Title="App Id" DefaultValue="" Required="true" Debug.DefaultValue="880047117"/>
      <Text Id="Country" Title="Country" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSCountries" Select.IdField="Id" Select.TitleField="Country" HelpText="The two letter country code you want to fetch the application in."/>
      <Text Id="Language" Title="Language (Two-letter Code)" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSLanguages" Select.IdField="Id" Select.TitleField="Id" HelpText="The two letter language you want to fetch the application in."/>
      <Select Id="Device" Title="Device" Required="false" DefaultValue="iphone" HelpText="The device you want to fetch the application for.">
        <DataSource>
					<Item Id="iphone" Title="iPhone"/>
					<Item Id="ipad" Title="iPad"/>
        </DataSource>
      </Select>
    </Parameters>
    <Fetch>
      <Resource Id="Header"/>
      <Fetch.Url>
        <![CDATA[
        https://api.apptweak.com/ios/applications/@(Model.AppId)/reviews.json
				?language=@(Model.Language)
				&country=@(Model.Country)
				&device=@(Model.Device)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
			<JsonPath Expr="content.*">
				<JsonPath Expr="id" Id="Id" Converter="String" HelpText=""/>
				<JsonPath Expr="title" Id="Title" Converter="String" HelpText=""/>
				<JsonPath Expr="body" Id="Body" Converter="String" HelpText=""/>
				<JsonPath Expr="date" Id="Date" Converter="DateTime" HelpText=""/>
				<JsonPath Expr="rating" Id="Rating" Converter="Double" HelpText=""/>
				<JsonPath Expr="vote_count" Id="Votes" Converter="Long" HelpText=""/>
				<JsonPath Expr="vote_sum" Id="VoteSum" Converter="Long" HelpText=""/>
				<JsonPath Expr="body_length" Id="BodyLength" Converter="Long" HelpText=""/>
				<JsonPath Expr="author.id" Id="AuthorId" Converter="Long" HelpText=""/>
				<JsonPath Expr="author.name" Id="AuthorName" Converter="String" HelpText=""/>
				<JsonPath Expr="author.type" Id="AuthorType" Converter="String" HelpText=""/>
			</JsonPath>
    </Parse>
    <Resource Id="Error"/>
  </RestConnector>

  <RestConnector Id="iOSAppRankings" Title="iOS App Rankings" HelpText="Returns ranking positions for the last 30 days." HelpUrl="https://apptweak.io/api/ios#get-application">
    <Parameters>
      <Text Id="AppId" Title="App Id" DefaultValue="" Required="true" Debug.DefaultValue="880047117"/>
      <Text Id="Country" Title="Country" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSCountries" Select.IdField="Id" Select.TitleField="Country" HelpText="The two letter country code you want to fetch the application in."/>
      <Text Id="Language" Title="Language (Two-letter Code)" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSLanguages" Select.IdField="Id" Select.TitleField="Id" HelpText="The two letter language you want to fetch the application in."/>
      <Select Id="Device" Title="Device" Required="false" DefaultValue="iphone" HelpText="The device you want to fetch the application for.">
        <DataSource>
					<Item Id="iphone" Title="iPhone"/>
					<Item Id="ipad" Title="iPad"/>
        </DataSource>
      </Select>
    </Parameters>
    <Fetch>
      <Resource Id="Header"/>
      <Fetch.Url>
        <![CDATA[
        https://api.apptweak.com/ios/applications/@(Model.AppId)/rankings.json
				?language=@(Model.Language)
				&country=@(Model.Country)
				&device=@(Model.Device)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
			<JsonPath Expr="content.type" Id="Type" Converter="String" HelpText=""/>
			<JsonPath Expr="content.start_date" Id="StartDate" Converter="DateTime" HelpText=""/>
			<JsonPath Expr="content.end_date" Id="EndDate" Converter="DateTime" HelpText=""/>
      <JsonPath Expr="content.ranks[0].*">
        <JsonPath Expr="." Id="Ranking" Converter="Long" DefaultValue="-"/>
      </JsonPath>
    </Parse>
    <Resource Id="Error"/>
  </RestConnector>

  <RestConnector Id="iOSAppRatings" Title="iOS App Ratings" HelpText="Returns the distribution of all 1-5 ratings including averages and total ratings." HelpUrl="https://apptweak.io/api/ios#get-application">
    <Parameters>
      <Text Id="AppId" Title="App Id" DefaultValue="" Required="true" Debug.DefaultValue="880047117"/>
      <Text Id="Country" Title="Country" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSCountries" Select.IdField="Id" Select.TitleField="Country" HelpText="The two letter country code you want to fetch the application in."/>
      <Text Id="Language" Title="Language (Two-letter Code)" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSLanguages" Select.IdField="Id" Select.TitleField="Id" HelpText="The two letter language you want to fetch the application in."/>
      <Select Id="Device" Title="Device" Required="false" DefaultValue="iphone" HelpText="The device you want to fetch the application for.">
        <DataSource>
					<Item Id="iphone" Title="iPhone"/>
					<Item Id="ipad" Title="iPad"/>
        </DataSource>
      </Select>
    </Parameters>
    <Fetch>
      <Resource Id="Header"/>
      <Fetch.Url>
        <![CDATA[
        https://api.apptweak.com/ios/applications/@(Model.AppId)/ratings.json
				?language=@(Model.Language)
				&country=@(Model.Country)
				&device=@(Model.Device)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
			<JsonPath Expr="content.start_date" Id="StartDate" Converter="DateTime" HelpText=""/>
			<JsonPath Expr="content.end_date" Id="EndDate" Converter="DateTime" HelpText=""/>
			<JsonPath Expr="content.ratings.*">
				<JsonPath Expr="1" Id="Rating1" Converter="Long" DefaultValue="-" HelpText=""/>
				<JsonPath Expr="2" Id="Rating2" Converter="Long" DefaultValue="-" HelpText=""/>
				<JsonPath Expr="3" Id="Rating3" Converter="Long" DefaultValue="-" HelpText=""/>
				<JsonPath Expr="4" Id="Rating4" Converter="Long" DefaultValue="-" HelpText=""/>
				<JsonPath Expr="5" Id="Rating5" Converter="Long" DefaultValue="-" HelpText=""/>
				<JsonPath Expr="total" Id="Total" Converter="Long" DefaultValue="-" HelpText=""/>
				<JsonPath Expr="avg" Id="Average" Converter="Double" DefaultValue="-" HelpText=""/>
			</JsonPath>
    </Parse>
    <Resource Id="Error"/>
  </RestConnector>

  <RestConnector Id="AndroidAppRatings" Title="Android App Ratings" HelpText="Returns the distribution of all 1-5 ratings including averages and total ratings." HelpUrl="https://apptweak.io/api/android#get-application">
    <Parameters>
      <Text Id="AppId" Title="App Id" DefaultValue="" Required="true" Debug.DefaultValue="com.rovio.angrybirds"/>
      <Text Id="Country" Title="Country" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="AndroidCountries" Select.IdField="Id" Select.TitleField="Country" HelpText="The two letter country code you want to fetch the application in."/>
      <Text Id="Language" Title="Language (Two-letter Code)" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="AndroidLanguages" Select.IdField="Id" Select.TitleField="Id" HelpText="The two letter language you want to fetch the application in."/>
    </Parameters>
    <Fetch>
      <Resource Id="Header"/>
      <Fetch.Url>
        <![CDATA[
        https://api.apptweak.com/android/applications/@(Model.AppId)/ratings.json
				?country=@(Model.Country)
				&language=@(Model.Language)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
			<JsonPath Expr="content">
				<JsonPath Expr="star_count.1" Id="Rating1" Converter="Long" DefaultValue="-" HelpText=""/>
				<JsonPath Expr="star_count.2" Id="Rating2" Converter="Long" DefaultValue="-" HelpText=""/>
				<JsonPath Expr="star_count.3" Id="Rating3" Converter="Long" DefaultValue="-" HelpText=""/>
				<JsonPath Expr="star_count.4" Id="Rating4" Converter="Long" DefaultValue="-" HelpText=""/>
				<JsonPath Expr="star_count.5" Id="Rating5" Converter="Long" DefaultValue="-" HelpText=""/>
				<JsonPath Expr="count" Id="Total" Converter="Long" DefaultValue="-" HelpText=""/>
				<JsonPath Expr="average" Id="Average" Converter="Double" DefaultValue="-" HelpText=""/>
			</JsonPath>
    </Parse>
    <Resource Id="Error"/>
  </RestConnector>

  <RestConnector Id="iOSCategoryTopApps" Title="iOS Category Top Apps" HelpText="Allows you to fetch the 200 most popular applications for a category and type in a country for a device." HelpUrl="https://apptweak.io/api/ios#get-top">
    <Parameters>
      <Text Id="Category" Title="Category (0 = All)" DefaultValue="0" Required="true" Debug.DefaultValue="0" Select.Connector="iOSCategories" Select.IdField="Id" Select.TitleField="Category" HelpText="The ID of the category this rankings object is referring to."/>
      <Text Id="Country" Title="Country" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSCountries" Select.IdField="Id" Select.TitleField="Country" HelpText="The two letter country code you want to fetch the application in."/>
      <Text Id="Language" Title="Language (Two-letter Code)" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSLanguages" Select.IdField="Id" Select.TitleField="Id" HelpText="The two letter language you want to fetch the application in."/>
      <Select Id="Device" Title="Device" Required="false" DefaultValue="iphone" HelpText="The device you want to fetch the application for.">
        <DataSource>
					<Item Id="iphone" Title="iPhone"/>
					<Item Id="ipad" Title="iPad"/>
        </DataSource>
      </Select>
      <Select Id="Type" Title="Type" Required="false" DefaultValue="free" HelpText="The kind of chart you want to fetch.">
        <DataSource>
					<Item Id="free" Title="Free"/>
					<Item Id="paid" Title="Paid"/>
					<Item Id="grossing" Title="Grossing"/>
        </DataSource>
      </Select>
    </Parameters>
    <Fetch>
      <Resource Id="Header"/>
      <Fetch.Url>
        <![CDATA[
        https://api.apptweak.com/ios/categories/@(Model.Category)/top.json
				?language=@(Model.Language)
				&country=@(Model.Country)
				&device=@(Model.Device)
				&type=@(Model.Type)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
			<JsonPath Expr="content.*">
				<JsonPath Expr="id" Id="Id" Converter="Int" HelpText="The ID that Apple has given to the application. "/>
				<JsonPath Expr="title" Id="Title" Converter="String" HelpText="The App name as it appears on the App Store, in the chosen language."/>
				<JsonPath Expr="slug" Id="Slug" Converter="String" HelpText="URL friendly version of the app name."/>
				<JsonPath Expr="developer" Id="Developer" Converter="String" HelpText="The application developer name."/>
				<JsonPath Expr="price" Id="Price" Converter="String" HelpText="The price of the application as displayed on the App Store"/>
				<JsonPath Expr="rating" Id="Rating" Converter="Double" HelpText="The average rating of the App."/>
				<Compute Id="Devices" Converter="Auto" DefaultValue="" HelpText="The list of devices the app is available on.">
					<Compute.Expr>
						<![CDATA[@Regex.Replace(Model.Inp, @"[""\[\]\r\n]", "")]]>
					</Compute.Expr>
					<JsonPath Expr="devices" Id="Inp" DefaultValue=""/>
				</Compute>
				<Compute Id="Categories" Converter="Auto" DefaultValue="" HelpText="The list of category the app is listed on.">
					<Compute.Expr>
						<![CDATA[@Regex.Replace(Model.Inp, @"[""\[\]\r\n]", "")]]>
					</Compute.Expr>
					<JsonPath Expr="genres" Id="Inp" DefaultValue=""/>
				</Compute>
				<JsonPath Expr="in_apps" Id="InApps" Converter="Bool" HelpText=""/>
				<JsonPath Expr="icon" Id="Icon" Converter="String" HelpText="The URL of the icon as it appears on the App Store."/>
			</JsonPath>
    </Parse>
    <Resource Id="Error"/>
  </RestConnector>

  <RestConnector Id="AndroidCategoryTopApps" Title="Android Category Top Apps" HelpText="Allows you to fetch the 200 most popular applications for a category and type in a country for a device." HelpUrl="https://apptweak.io/api/android#get-top">
    <Parameters>
      <Text Id="Category" Title="Category" DefaultValue="ALL" Required="true" Debug.DefaultValue="BUSINESS" Select.Connector="AndroidCategories" Select.IdField="Id" Select.TitleField="Category" HelpText="The ID of the category this rankings object is referring to."/>
      <Text Id="Country" Title="Country" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="AndroidCountries" Select.IdField="Id" Select.TitleField="Country" HelpText="The two letter country code you want to fetch the application in."/>
      <Text Id="Language" Title="Language (Two-letter Code)" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="AndroidLanguages" Select.IdField="Id" Select.TitleField="Id" HelpText="The two letter language you want to fetch the application in."/>
      <Select Id="Type" Title="Type" Required="false" DefaultValue="free" HelpText="The kind of chart you want to fetch.">
        <DataSource>
					<Item Id="free" Title="Free"/>
					<Item Id="paid" Title="Paid"/>
					<Item Id="grossing" Title="Grossing"/>
        </DataSource>
      </Select>
    </Parameters>
    <Fetch>
      <Resource Id="Header"/>
      <Fetch.Url>
        <![CDATA[
        https://api.apptweak.com/android/categories/@(Model.Category)/top.json
				?language=@(Model.Language)
				&country=@(Model.Country)
				&type=@(Model.Type)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
			<JsonPath Expr="content.*">
				<JsonPath Expr="id" Id="Id" Converter="String" HelpText=""/>
				<JsonPath Expr="title" Id="Title" Converter="String" HelpText=""/>
				<JsonPath Expr="developer" Id="Developer" Converter="String" HelpText=""/>
				<JsonPath Expr="price" Id="Price" Converter="String" HelpText="" DefaultValue=""/>
				<JsonPath Expr="rating" Id="Rating" Converter="Double" HelpText="" DefaultValue=""/>
				<Compute Id="Genres" Converter="Auto" DefaultValue="" HelpText="The list of category the app is listed on.">
					<Compute.Expr>
						<![CDATA[@Regex.Replace(Model.Inp, @"[""\[\]\r\n]", "")]]>
					</Compute.Expr>
					<JsonPath Expr="genres" Id="Inp" DefaultValue=""/>
				</Compute>
				<JsonPath Expr="icon" Id="Icon" Converter="String" HelpText=""/>
			</JsonPath>
    </Parse>
    <Resource Id="Error"/>
  </RestConnector>

  <RestConnector Id="iOSSearchApps" Title="iOS Search Apps" HelpText="Searches allow you to query the App Store for a term and get the ordered list of applications that would appear on a user device" HelpUrl="https://apptweak.io/api/ios#search-and-top">
    <Parameters>
      <Text Id="Query" Title="Search Term" DefaultValue="" Required="true" Debug.DefaultValue="angry"/>
      <Text Id="Country" Title="Country" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSCountries" Select.IdField="Id" Select.TitleField="Country" HelpText="The two letter country code you want to fetch the application in."/>
      <Text Id="Language" Title="Language (Two-letter Code)" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSLanguages" Select.IdField="Id" Select.TitleField="Id" HelpText="The two letter language you want to fetch the application in."/>
      <Select Id="Device" Title="Device" Required="false" DefaultValue="iphone" HelpText="The device you want to fetch the application for.">
        <DataSource>
					<Item Id="iphone" Title="iPhone"/>
					<Item Id="ipad" Title="iPad"/>
        </DataSource>
      </Select>
      <Number Id="Results" Title="Results" DefaultValue="10" Minimum="1" Maximum="50" Required="false" HelpText="The number of results for which details should be provided"/>
    </Parameters>
    <Fetch>
      <Resource Id="Header"/>
      <Fetch.Url>
        <![CDATA[
        https://api.apptweak.com/ios/searches.json?term=@Utils.UrlEncode(Model.Query)
				&language=@(Model.Language)
				&country=@(Model.Country)
				&device=@(Model.Device)
				&num=@(Model.Results)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
			<JsonPath Expr="content.*">
				<JsonPath Expr="id" Id="Id" Converter="Int" HelpText="The ID that Apple has given to the application."/>
				<JsonPath Expr="title" Id="Title" Converter="String" HelpText="The App name as it appears on the App Store, in the chosen language."/>
				<JsonPath Expr="slug" Id="Slug" Converter="String" HelpText="URL friendly version of the app name."/>
				<JsonPath Expr="developer" Id="Developer" Converter="String" HelpText="The application developer name."/>
				<JsonPath Expr="price" Id="Price" Converter="String" HelpText="The price of the application as displayed on the App Store"/>
				<JsonPath Expr="rating" Id="Rating" Converter="Double" HelpText="The average rating of the App."/>
				<Compute Id="Devices" Converter="Auto" DefaultValue="" HelpText="The list of devices the app is available on.">
					<Compute.Expr>
						<![CDATA[@Regex.Replace(Model.Inp, @"[""\[\]\r\n]", "")]]>
					</Compute.Expr>
					<JsonPath Expr="devices" Id="Inp" DefaultValue=""/>
				</Compute>
				<Compute Id="Categories" Converter="Auto" DefaultValue="" HelpText="The list of category the app is listed on.">
					<Compute.Expr>
						<![CDATA[@Regex.Replace(Model.Inp, @"[""\[\]\r\n]", "")]]>
					</Compute.Expr>
					<JsonPath Expr="genres" Id="Inp" DefaultValue=""/>
				</Compute>
				<JsonPath Expr="in_apps" Id="InApps" Converter="Bool" HelpText=""/>
				<JsonPath Expr="icon" Id="Icon" Converter="String" HelpText="The URL of the icon as it appears on the App Store."/>
			</JsonPath>
    </Parse>
    <Resource Id="Error"/>
  </RestConnector>

  <RestConnector Id="AndroidSearchApps" Title="Android Search Apps" HelpText="Searches allow you to query the Google Play Store for a term and get the ordered list of applications that would appear on a user device" HelpUrl="https://apptweak.io/api/android#search-and-top">
    <Parameters>
      <Text Id="Query" Title="Search Term" DefaultValue="" Required="true" Debug.DefaultValue="angry"/>
      <Text Id="Country" Title="Country" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="AndroidCountries" Select.IdField="Id" Select.TitleField="Country" HelpText="The two letter country code you want to fetch the application in."/>
      <Text Id="Language" Title="Language (Two-letter Code)" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="AndroidLanguages" Select.IdField="Id" Select.TitleField="Id" HelpText="The two letter language you want to fetch the application in."/>
    </Parameters>
    <Fetch>
      <Resource Id="Header"/>
      <Fetch.Url>
        <![CDATA[
        https://api.apptweak.com/android/searches.json?term=@Utils.UrlEncode(Model.Query)
				&language=@(Model.Language)
				&country=@(Model.Country)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
			<JsonPath Expr="content.*">
				<JsonPath Expr="id" Id="Id" Converter="String" HelpText=""/>
				<JsonPath Expr="title" Id="Title" Converter="String" HelpText=""/>
				<JsonPath Expr="developer" Id="Developer" Converter="String" HelpText=""/>
				<JsonPath Expr="price" Id="Price" Converter="String" HelpText="" DefaultValue=""/>
				<JsonPath Expr="rating" Id="Rating" Converter="Double" HelpText="" DefaultValue=""/>
				<Compute Id="Genres" Converter="Auto" DefaultValue="" HelpText="The list of category the app is listed on.">
					<Compute.Expr>
						<![CDATA[@Regex.Replace(Model.Inp, @"[""\[\]\r\n]", "")]]>
					</Compute.Expr>
					<JsonPath Expr="genres" Id="Inp" DefaultValue=""/>
				</Compute>
				<JsonPath Expr="icon" Id="Icon" Converter="String" HelpText=""/>
			</JsonPath>
    </Parse>
    <Resource Id="Error"/>
  </RestConnector>

  <RestConnector Id="iOSKeywordStats" Title="iOS Keyword Stats" HelpText="Allow you to fetch information about the popularity and competition of a given keyword." HelpUrl="https://apptweak.io/api/ios#keywords-stats">
    <Parameters>
      <Text Id="Keyword" Title="Keywords" DefaultValue="" Required="true" Debug.DefaultValue="arcade"/>
      <Text Id="Country" Title="Country" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSCountries" Select.IdField="Id" Select.TitleField="Country" HelpText="The two letter country code you want to fetch the application in."/>
      <Text Id="Language" Title="Language (Two-letter Code)" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSLanguages" Select.IdField="Id" Select.TitleField="Id" HelpText="The two letter language you want to fetch the application in."/>
      <Select Id="Device" Title="Device" Required="false" DefaultValue="iphone" HelpText="The device you want to fetch the application for.">
        <DataSource>
					<Item Id="iphone" Title="iPhone"/>
					<Item Id="ipad" Title="iPad"/>
        </DataSource>
      </Select>
    </Parameters>
    <Fetch>
      <Resource Id="Header"/>
      <Fetch.Url>
        <![CDATA[
        https://api.apptweak.com/ios/keywords/stats.json?keywords=@(Model.Keyword)
				&language=@(Model.Language)
				&country=@(Model.Country)
				&device=@(Model.Device)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="$.content.*">
        <JsonPath Expr="volume" Id="Volume" Converter="Double" DefaultValue="" HelpText="A score between 0 and 100 indicating how popular the keyword is."/>
        <JsonPath Expr="competition" Id="Competition" Converter="Double" DefaultValue="" HelpText="A score between 0 and 100 indicating how competitive the keyword is."/>
        <JsonPath Expr="kei" Id="Kei" Title="Keyword Efficiency Index" Converter="Double" DefaultValue="" HelpText="A score between 0 and 100 taking into account both the volume and competition."/>
        <JsonPath Expr="competition_details.total_size" Id="CompetitionSize"  Converter="Double" DefaultValue="" HelpText="provides the precise number of apps in the App Store search results when a search is performed on the keyword."/>
			</JsonPath>
    </Parse>
    <Resource Id="Error"/>
  </RestConnector>

  <RestConnector Id="AndroidKeywordStats" Title="Android Keyword Stats" HelpText="Allow you to fetch information about the popularity and competition of a given keyword." HelpUrl="https://apptweak.io/api/android#keywords-stats">
    <Parameters>
      <Text Id="Keyword" Title="Keywords" DefaultValue="" Required="true" Debug.DefaultValue="arcade"/>
      <Text Id="Country" Title="Country" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="AndroidCountries" Select.IdField="Id" Select.TitleField="Country" HelpText="The two letter country code you want to fetch the application in."/>
      <Text Id="Language" Title="Language (Two-letter Code)" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="AndroidLanguages" Select.IdField="Id" Select.TitleField="Id" HelpText="The two letter language you want to fetch the application in."/>
    </Parameters>
    <Fetch>
      <Resource Id="Header"/>
      <Fetch.Url>
        <![CDATA[
        https://api.apptweak.com/android/keywords/stats.json?keywords=@(Model.Keyword)
				&language=@(Model.Language)
				&country=@(Model.Country)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="$.content.*">
        <JsonPath Expr="volume" Id="Volume" Converter="Double" DefaultValue="" HelpText="A score between 0 and 100 indicating how popular the keyword is."/>
        <JsonPath Expr="competition" Id="Competition" Converter="Double" DefaultValue="" HelpText="A score between 0 and 100 indicating how competitive the keyword is."/>
        <JsonPath Expr="kei" Id="Kei" Title="Keyword Efficiency Index" Converter="Double" DefaultValue="" HelpText="A score between 0 and 100 taking into account both the volume and competition."/>
        <JsonPath Expr="competition_details.total_size" Id="CompetitionSize"  Converter="Double" DefaultValue="" HelpText="provides the precise number of apps in the App Store search results when a search is performed on the keyword."/>
			</JsonPath>
    </Parse>
    <Resource Id="Error"/>
  </RestConnector>

  <RestConnector Id="iOSAppTopKeywords" Title="iOS App Top Keywords" HelpText="Allows you to retrieve a list of keywords an app is performing well on." HelpUrl="https://apptweak.io/api/ios#get-keywords">
    <Parameters>
      <Text Id="AppId" Title="App Id" DefaultValue="" Required="true" Debug.DefaultValue="880047117"/>
      <Text Id="Country" Title="Country" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSCountries" Select.IdField="Id" Select.TitleField="Country" HelpText="The two letter country code you want to fetch the application in."/>
      <Text Id="Language" Title="Language (Two-letter Code)" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSLanguages" Select.IdField="Id" Select.TitleField="Id" HelpText="The two letter language you want to fetch the application in."/>
      <Select Id="Device" Title="Device" Required="false" DefaultValue="iphone" HelpText="The device you want to fetch the application for.">
        <DataSource>
					<Item Id="iphone" Title="iPhone"/>
					<Item Id="ipad" Title="iPad"/>
        </DataSource>
      </Select>
    </Parameters>
    <Paging PageSize="5000"/>
    <Fetch>
      <Resource Id="Header"/>
      <Fetch.Url>
        <![CDATA[
        https://api.apptweak.com/ios/applications/@(Model.AppId)/keywords/top.json
				?language=@(Model.Language)
				&country=@(Model.Country)
				&device=@(Model.Device)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
			<JsonPath Expr="content.*">
				<JsonPath Expr="keyword" Id="Keyword" Converter="Auto" DefaultValue="" HelpText="The keyword this keyword/ranking object is referring to."/>
				<JsonPath Expr="ranking" Id="Position" Converter="Long" DefaultValue="" HelpText="The ranking of the app for the keyword."/>
			</JsonPath>
    </Parse>
    <Resource Id="Error"/>
  </RestConnector>

  <RestConnector Id="AndroidAppTopKeywords" Title="Android App Top Keywords" HelpText="Allows you to retrieve a list of keywords an app is performing well on." HelpUrl="https://apptweak.io/api/android#keywords">
    <Parameters>
      <Text Id="AppId" Title="App Id" DefaultValue="" Required="true" Debug.DefaultValue="com.rovio.angrybirds"/>
      <Text Id="Country" Title="Country" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="AndroidCountries" Select.IdField="Id" Select.TitleField="Country" HelpText="The two letter country code you want to fetch the application in."/>
      <Text Id="Language" Title="Language (Two-letter Code)" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="AndroidLanguages" Select.IdField="Id" Select.TitleField="Id" HelpText="The two letter language you want to fetch the application in."/>
    </Parameters>
    <Paging PageSize="5000"/>
    <Fetch>
      <Resource Id="Header"/>
      <Fetch.Url>
        <![CDATA[
        https://api.apptweak.com/android/applications/@(Model.AppId)/keywords/top.json
				?language=@(Model.Language)
				&country=@(Model.Country)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
			<JsonPath Expr="content.*">
				<JsonPath Expr="keyword" Id="Keyword" Converter="Auto" DefaultValue="" HelpText="The keyword this keyword/ranking object is referring to."/>
				<JsonPath Expr="ranking" Id="Position" Converter="Long" DefaultValue="" HelpText="The ranking of the app for the keyword."/>
			</JsonPath>
    </Parse>
    <Resource Id="Error"/>
  </RestConnector>

  <RestConnector Id="iOSAppSuggestedKeywords" Title="iOS App Suggested Keywords" HelpText="Allow you to get a list of keyword that AppTweak think are relevant to the application." HelpUrl="https://apptweak.io/api/ios#suggested-keywords">
    <Parameters>
      <Text Id="AppId" Title="App Id" DefaultValue="" Required="true" Debug.DefaultValue="880047117"/>
      <Text Id="Country" Title="Country" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSCountries" Select.IdField="Id" Select.TitleField="Country" HelpText="The two letter country code you want to fetch the application in."/>
      <Text Id="Language" Title="Language (Two-letter Code)" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSLanguages" Select.IdField="Id" Select.TitleField="Id" HelpText="The two letter language you want to fetch the application in."/>
      <Select Id="Device" Title="Device" Required="false" DefaultValue="iphone" HelpText="The device you want to fetch the application for.">
        <DataSource>
					<Item Id="iphone" Title="iPhone"/>
					<Item Id="ipad" Title="iPad"/>
        </DataSource>
      </Select>
    </Parameters>
    <Paging PageSize="100"/>
    <Fetch>
      <Resource Id="Header"/>
      <Fetch.Url>
        <![CDATA[
        https://api.apptweak.com/ios/applications/@(Model.AppId)/keywords/suggested.json
				?language=@(Model.Language)
				&country=@(Model.Country)
				&device=@(Model.Device)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
			<JsonPath Expr="content.*">
				<JsonPath Expr="keyword" Id="Keyword" Converter="Auto" DefaultValue="" HelpText="The suggested keyword"/>
				<JsonPath Expr="relevance" Id="Relevance" Converter="Double" DefaultValue="" HelpText="A score indicating how relevant the keyword is to the app"/>
			</JsonPath>
    </Parse>
    <Resource Id="Error"/>
  </RestConnector>

  <RestConnector Id="AndroidAppSuggestedKeywords" Title="Android App Suggested Keywords" HelpText="Allow you to get a list of keyword that AppTweak think are relevant to the application." HelpUrl="https://apptweak.io/api/android#suggested-keywords">
    <Parameters>
      <Text Id="AppId" Title="App Id" DefaultValue="" Required="true" Debug.DefaultValue="com.rovio.angrybirds"/>
      <Text Id="Country" Title="Country" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="AndroidCountries" Select.IdField="Id" Select.TitleField="Country" HelpText="The two letter country code you want to fetch the application in."/>
      <Text Id="Language" Title="Language (Two-letter Code)" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="AndroidLanguages" Select.IdField="Id" Select.TitleField="Id" HelpText="The two letter language you want to fetch the application in."/>
    </Parameters>
    <Paging PageSize="100"/>
    <Fetch>
      <Resource Id="Header"/>
      <Fetch.Url>
        <![CDATA[
        https://api.apptweak.com/android/applications/@(Model.AppId)/keywords/suggested.json
				?language=@(Model.Language)
				&country=@(Model.Country)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
			<JsonPath Expr="content.*">
				<JsonPath Expr="keyword" Id="Keyword" Converter="Auto" DefaultValue="" HelpText="The suggested keyword"/>
				<JsonPath Expr="relevance" Id="Relevance" Converter="Double" DefaultValue="" HelpText="A score indicating how relevant the keyword is to the app"/>
			</JsonPath>
    </Parse>
    <Resource Id="Error"/>
  </RestConnector>

  <RestConnector Id="iOSAppKeywordsCompetitors" Title="iOS App Keywords Competitors" HelpText="Allow you to get a list of applications that are competing with the given application on search result. These application are ranked at similar positions on the app main keywords." HelpUrl="https://apptweak.io/api/ios#suggested-keywords">
    <Parameters>
      <Text Id="AppId" Title="App Id" DefaultValue="" Required="true" Debug.DefaultValue="880047117"/>
      <Text Id="Country" Title="Country" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSCountries" Select.IdField="Id" Select.TitleField="Country" HelpText="The two letter country code you want to fetch the application in."/>
      <Text Id="Language" Title="Language (Two-letter Code)" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSLanguages" Select.IdField="Id" Select.TitleField="Id" HelpText="The two letter language you want to fetch the application in."/>
      <Select Id="Device" Title="Device" Required="false" DefaultValue="iphone" HelpText="The device you want to fetch the application for.">
        <DataSource>
					<Item Id="iphone" Title="iPhone"/>
					<Item Id="ipad" Title="iPad"/>
        </DataSource>
      </Select>
    </Parameters>
    <Paging PageSize="100"/>
    <Fetch>
      <Resource Id="Header"/>
      <Fetch.Url>
        <![CDATA[
        https://api.apptweak.com/ios/applications/@(Model.AppId)/keywords/competitors.json
				?language=@(Model.Language)
				&country=@(Model.Country)
				&device=@(Model.Device)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
			<JsonPath Expr="content.*">
				<JsonPath Expr="id" Id="Id" Converter="Int" HelpText="The ID that Apple has given to the application. "/>
				<JsonPath Expr="title" Id="Title" Converter="String" HelpText="The App name as it appears on the App Store, in the chosen language."/>
				<JsonPath Expr="price" Id="Price" Converter="String" HelpText="The price of the application as displayed on the App Store"/>
				<JsonPath Expr="rating" Id="Rating" Converter="Double" HelpText="The average rating of the App."/>
				<Compute Id="Categories" Converter="Auto" DefaultValue="" HelpText="The list of category the app is listed on.">
					<Compute.Expr>
						<![CDATA[@Regex.Replace(Model.Inp, @"[""\[\]\r\n]", "")]]>
					</Compute.Expr>
					<JsonPath Expr="genres" Id="Inp" DefaultValue=""/>
				</Compute>
				<JsonPath Expr="version" Id="Version" Converter="String" HelpText="The current version of the App."/>
				<JsonPath Expr="icon" Id="Icon" Converter="String" HelpText="The URL of the icon as it appears on the App Store."/>
			</JsonPath>
    </Parse>
    <Resource Id="Error"/>
  </RestConnector>

  <RestConnector Id="AndroidAppKeywordsCompetitors" Title="Android App Keywords Competitors" HelpText="Allow you to get a list of applications that are competing with the given application on search result. These application are ranked at similar positions on the app main keywords." HelpUrl="https://apptweak.io/api/android#keywords-competitors">
    <Parameters>
      <Text Id="AppId" Title="App Id" DefaultValue="" Required="true" Debug.DefaultValue="com.rovio.angrybirds"/>
      <Text Id="Country" Title="Country" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="AndroidCountries" Select.IdField="Id" Select.TitleField="Country" HelpText="The two letter country code you want to fetch the application in."/>
      <Text Id="Language" Title="Language (Two-letter Code)" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="AndroidLanguages" Select.IdField="Id" Select.TitleField="Id" HelpText="The two letter language you want to fetch the application in."/>
    </Parameters>
    <Paging PageSize="100"/>
    <Fetch>
      <Resource Id="Header"/>
      <Fetch.Url>
        <![CDATA[
        https://api.apptweak.com/android/applications/@(Model.AppId)/keywords/competitors.json
				?language=@(Model.Language)
				&country=@(Model.Country)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
			<JsonPath Expr="content.*">
				<JsonPath Expr="id" Id="Id" Converter="String" HelpText="The ID given by the developer to its application."/>
				<JsonPath Expr="title" Id="Title" Converter="String" HelpText="The App name as it appears on the Play Store, in the chosen language."/>
				<JsonPath Expr="price" Id="Price" Converter="String" HelpText="The price of the application as displayed on the store"/>
				<JsonPath Expr="rating" Id="Rating" Converter="Double" HelpText="The average rating of the App."/>
				<Compute Id="Categories" Converter="Auto" DefaultValue="" HelpText="The list of category the app is listed on.">
					<Compute.Expr>
						<![CDATA[@Regex.Replace(Model.Inp, @"[""\[\]\r\n]", "")]]>
					</Compute.Expr>
					<JsonPath Expr="genres" Id="Inp" DefaultValue=""/>
				</Compute>
				<JsonPath Expr="version" Id="Version" Converter="String" HelpText="The current version of the App."/>
				<JsonPath Expr="icon" Id="Icon" Converter="String" HelpText="The URL of the icon as it appears on the Play Store."/>
			</JsonPath>
    </Parse>
    <Resource Id="Error"/>
  </RestConnector>

  <RestConnector Id="iOSCategoryTopKeywords" Title="iOS Category Top Keywords" HelpText="Gives the most popular keyword for a given category. This is computed by looking at the best keywords for the app present at the top of each category." HelpUrl="https://apptweak.io/api/ios#category-top-keywords">
    <Parameters>
      <Text Id="Category" Title="Category" DefaultValue="" Required="true" Debug.DefaultValue="6000" Select.Connector="iOSCategories" Select.IdField="Id" Select.TitleField="Category" HelpText="The ID of the category this rankings object is referring to."/>
      <Text Id="Country" Title="Country" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSCountries" Select.IdField="Id" Select.TitleField="Country" HelpText="The two letter country code you want to fetch the application in."/>
      <Text Id="Language" Title="Language (Two-letter Code)" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSLanguages" Select.IdField="Id" Select.TitleField="Id" HelpText="The two letter language you want to fetch the application in."/>
      <Select Id="Device" Title="Device" Required="false" DefaultValue="iphone" HelpText="The device you want to fetch the application for.">
        <DataSource>
					<Item Id="iphone" Title="iPhone"/>
					<Item Id="ipad" Title="iPad"/>
        </DataSource>
      </Select>
      <Select Id="Type" Title="Type" Required="false" DefaultValue="free" HelpText="The kind of chart you want to fetch.">
        <DataSource>
					<Item Id="free" Title="Free"/>
					<Item Id="paid" Title="Paid"/>
					<Item Id="grossing" Title="Grossing"/>
        </DataSource>
      </Select>
    </Parameters>
    <Fetch>
      <Resource Id="Header"/>
      <Fetch.Url>
        <![CDATA[
        https://api.apptweak.com/ios/categories/@(Model.Category)/keywords/top.json
				?language=@(Model.Language)
				&country=@(Model.Country)
				&device=@(Model.Device)
				&type=@(Model.Type)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
			<JsonPath Expr="content.*">
				<JsonPath Expr="keyword" Id="Keyword" Converter="Auto" DefaultValue="" HelpText="The keyword"/>
				<JsonPath Expr="score" Id="Score" Converter="Double" DefaultValue="" HelpText="A measure of how popular the keyword is in the category"/>
				<JsonPath Expr="stats.volume" Id="Volume" Converter="Double" DefaultValue="" HelpText="A score between 0 and 100 indicating how popular the keyword is."/>
				<JsonPath Expr="stats.competition" Id="Competition" Converter="Double" DefaultValue="" HelpText="A score between 0 and 100 indicating how competitive the keyword is."/>
				<JsonPath Expr="stats.kei" Id="Kei" Title="Keyword Efficiency Index" Converter="Double" DefaultValue="" HelpText="A score between 0 and 100 taking into account both the volume and competition."/>
			</JsonPath>
    </Parse>
    <Resource Id="Error"/>
  </RestConnector>

  <RestConnector Id="AndroidCategoryTopKeywords" Title="Android Category Top Keywords" HelpText="Gives the most popular keyword for a given category. This is computed by looking at the best keywords for the app present at the top of each cateogry." HelpUrl="https://apptweak.io/api/android#keywords-competitors">
    <Parameters>
      <Text Id="Category" Title="Category" DefaultValue="ALL" Required="true" Debug.DefaultValue="BUSINESS" Select.Connector="AndroidCategories" Select.IdField="Id" Select.TitleField="Category" HelpText="The ID of the category this rankings object is referring to."/>
      <Text Id="Country" Title="Country" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="AndroidCountries" Select.IdField="Id" Select.TitleField="Country" HelpText="The two letter country code you want to fetch the application in."/>
      <Text Id="Language" Title="Language (Two-letter Code)" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="AndroidLanguages" Select.IdField="Id" Select.TitleField="Id" HelpText="The two letter language you want to fetch the application in."/>
    </Parameters>
    <Paging PageSize="100"/>
    <Fetch>
      <Resource Id="Header"/>
      <Fetch.Url>
        <![CDATA[
        https://api.apptweak.com/android/categories/@(Model.Category)/keywords/top.json
				?language=@(Model.Language)
				&country=@(Model.Country)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
			<JsonPath Expr="content.*">
				<JsonPath Expr="keyword" Id="Keyword" Converter="Auto" DefaultValue="" HelpText="The keyword"/>
				<JsonPath Expr="score" Id="Score" Converter="Double" DefaultValue="" HelpText="A measure of how popular the keyword is in the category"/>
				<JsonPath Expr="stats.volume" Id="Volume" Converter="Double" DefaultValue="" HelpText="A score between 0 and 100 indicating how popular the keyword is."/>
				<JsonPath Expr="stats.competition" Id="Competition" Converter="Double" DefaultValue="" HelpText="A score between 0 and 100 indicating how competitive the keyword is."/>
				<JsonPath Expr="stats.kei" Id="Kei" Title="Keyword Efficiency Index" Converter="Double" DefaultValue="" HelpText="A score between 0 and 100 taking into account both the volume and competition."/>
			</JsonPath>
    </Parse>
    <Resource Id="Error"/>
  </RestConnector>

  <RestConnector Id="iOSTrendingKeywords" Title="iOS Trending Keywords" HelpText="List of 10 suggested keywords search displayed in the search result of the appstore when the user has not typed anything." HelpUrl="https://apptweak.io/api/ios#trending-keywords">
    <Parameters>
      <Text Id="Country" Title="Country" DefaultValue="" Required="true" Debug.DefaultValue="us" Select.Connector="iOSCountries" Select.IdField="Id" Select.TitleField="Country" HelpText="The two letter country code you want to fetch the application in."/>
    </Parameters>
    <Fetch>
      <Resource Id="Header"/>
      <Fetch.Url>
        <![CDATA[
        https://api.apptweak.com/ios/keywords/trendings.json
				?country=@(Model.Country)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
			<JsonPath Expr="content.*">
				<JsonPath Expr="trend" Id="Keyword" Converter="Auto" DefaultValue="" HelpText="The keyword"/>
			</JsonPath>
    </Parse>
    <Resource Id="Error"/>
  </RestConnector>

</Suite>
