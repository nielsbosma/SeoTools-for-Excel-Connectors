<?xml version="1.0" encoding="utf-8" ?>
<Suite Title="Facebook" RequireVersion="5.2.6" Id="Facebook" Category="Social" SourceUrl="https://github.com/nielsbosma/SeoTools-for-Excel-Connectors/blob/master/Facebook.xml" HelpUrl="http://seotoolsforexcel.com/facebook/" HelpText="Documentation">

  <Author Name="Victor" Url="http://community.seotoolsforexcel.com/users/diskborste/activity"/>

  <DefaultOAuthAuthenticator StayAuthenticated="false" TokenName="access_token" AuthUrl="https://www.facebook.com/v2.8/dialog/oauth?client_id=1305465169512905&amp;response_type=token&amp;scope=manage_pages&amp;redirect_uri={0}"/>

  <RestConnector Id="PageLookup" Title="Page Lookup">
    <Parameters>
      <Text Id="PageId" Title="Page Id" Debug.DefaultValue="56796081303" Required="true" HelpText=""/>
    </Parameters>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/?id=
        @(Model.PageId)
        &fields=@SelectedFields()
        &access_token=@(Model.Authenticator.Token)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Title="Name" Id="Name" Expr="name" Converter="String" Tag="name" HelpText=""/>
      <JsonPath Title="Page Id" Id="PageId" Expr="id" Converter="String" Tag="id" HelpText=""/>
      <JsonPath Title="Category" Id="Category" Expr="category" Converter="String" Tag="category" HelpText=""/>
      <JsonPath Title="About" Id="About" Expr="about" Converter="String" Tag="about" HelpText="" DefaultValue=""/>
      <JsonPath Title="Description" Id="Description" Expr="description" Converter="String" Tag="description" HelpText="" DefaultValue=""/>
      <JsonPath Title="Checkins" Id="checkins" Expr="checkins" Converter="Int" Tag="checkins" HelpText=""/>
      <JsonPath Title="Fans" Id="Fans" Expr="fan_count" Converter="Int" Tag="fan_count" HelpText=""/>
      <JsonPath Title="Talking About" Id="TalkingAbout" Expr="talking_about_count" Converter="Int" Tag="talking_about_count" HelpText=""/>
      <JsonPath Title="Cover Photo Link" Id="CoverPhotoLink" Expr="cover.source" Converter="String" Tag="cover" HelpText="" DefaultValue=""/>
      <JsonPath Title="Website" Id="Website" Expr="website" Converter="String" Tag="website" HelpText="" DefaultValue=""/>
      <JsonPath Title="Email" Id="Email" Expr="emails" Converter="String" Tag="emails" HelpText="" DefaultValue="" Checked="false"/>
      <JsonPath Title="Phone" Id="Phone" Expr="phone" Converter="String" Tag="phone" HelpText="" DefaultValue="" Checked="false"/>
      <JsonPath Title="Company Overview" Id="CompanyOverview" Expr="company_overview" Converter="String" Tag="company_overview" HelpText="" DefaultValue="" Checked="false"/>
      <JsonPath Title="Awards" Id="Awards" Expr="awards" Converter="String" Tag="awards" HelpText="" DefaultValue="" Checked="false"/>
      <JsonPath Title="Hours" Id="Hours" Expr="hours" Converter="String" Tag="hours" HelpText="" DefaultValue="" Checked="false"/>
        <Compute Id="PageUrl" Title="Page URL">
          <Compute.Expr>
            <![CDATA[
            http://www.facebook.com/@(Model.PageIdInput)
            ]]>
          </Compute.Expr>
          <JsonPath Id="PageIdInput" Expr="id" Converter="String"/>
        </Compute>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="PagesLookup" Title="Page Lookup Batch">
    <Parameters>
      <Text Id="Ids" Title="Multiple Page Ids (Max 50)" Debug.DefaultValue="56796081303" Required="true" HelpText="" Multiline="true"/>
    </Parameters>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/?ids=
        @(FetchIdsBatch())
        &fields=@SelectedFields()
        &access_token=@(Model.Authenticator.Token)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="$.*">
        <JsonPath Title="Name" Id="Name" Expr="name" Converter="String" Tag="name" HelpText=""/>
        <JsonPath Title="Page Id" Id="PageId" Expr="id" Converter="String" Tag="id" HelpText=""/>
        <JsonPath Title="Category" Id="Category" Expr="category" Converter="String" Tag="category" HelpText=""/>
        <JsonPath Title="About" Id="About" Expr="about" Converter="String" Tag="about" HelpText="" DefaultValue=""/>
        <JsonPath Title="Description" Id="Description" Expr="description" Converter="String" Tag="description" HelpText="" DefaultValue=""/>
        <JsonPath Title="Checkins" Id="checkins" Expr="checkins" Converter="Int" Tag="checkins" HelpText=""/>
        <JsonPath Title="Fans" Id="Fans" Expr="fan_count" Converter="Int" Tag="fan_count" HelpText=""/>
        <JsonPath Title="Talking About" Id="TalkingAbout" Expr="talking_about_count" Converter="Int" Tag="talking_about_count" HelpText=""/>
        <JsonPath Title="Cover Photo Link" Id="CoverPhotoLink" Expr="cover.source" Converter="String" Tag="cover" HelpText="" DefaultValue=""/>
        <JsonPath Title="Website" Id="Website" Expr="website" Converter="String" Tag="website" HelpText="" DefaultValue=""/>
        <JsonPath Title="Email" Id="Email" Expr="emails" Converter="String" Tag="emails" HelpText="" DefaultValue="" Checked="false"/>
        <JsonPath Title="Phone" Id="Phone" Expr="phone" Converter="String" Tag="phone" HelpText="" DefaultValue="" Checked="false"/>
        <JsonPath Title="Company Overview" Id="CompanyOverview" Expr="company_overview" Converter="String" Tag="company_overview" HelpText="" DefaultValue="" Checked="false"/>
        <JsonPath Title="Awards" Id="Awards" Expr="awards" Converter="String" Tag="awards" HelpText="" DefaultValue="" Checked="false"/>
        <JsonPath Title="Hours" Id="Hours" Expr="hours" Converter="String" Tag="hours" HelpText="" DefaultValue="" Checked="false"/>
        <Compute Id="PageUrl" Title="Page URL">
          <Compute.Expr>
            <![CDATA[
            http://www.facebook.com/@(Model.PageIdInput)
            ]]>
          </Compute.Expr>
          <JsonPath Id="PageIdInput" Expr="id" Converter="String"/>
        </Compute>
      </JsonPath>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="GroupLookup" Title="Group Lookup">
    <Parameters>
      <Text Id="GroupId" Title="Group Id" Debug.DefaultValue="117245591640866" Required="true" HelpText=""/>
    </Parameters>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/?id=
        @(Model.GroupId)
        &fields=@SelectedFields()
        &access_token=@(Model.Authenticator.Token)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Title="Name" Id="Name" Expr="name" Converter="String" Tag="name" HelpText=""/>
      <JsonPath Title="Group Id" Id="GroupId" Expr="id" Converter="String" Tag="id" HelpText=""/>
      <JsonPath Title="Privacy" Id="Privacy" Expr="privacy" Converter="String" Tag="privacy" HelpText=""/>
      <JsonPath Title="Members" Id="Members" Expr="members.summary.total_count" Converter="Int" Tag="members.summary(true)" HelpText=""/>
      <JsonPath Title="Description" Id="Description" Expr="description" Converter="String" Tag="description" HelpText="" DefaultValue=""/>
      <JsonPath Title="Owner" Id="Owner" Expr="owner.name" Converter="String" Tag="owner" HelpText="" DefaultValue=""/>
      <JsonPath Title="Cover Photo Link" Id="CoverPhotoLink" Expr="cover.source" Converter="String" Tag="cover" HelpText="" DefaultValue=""/>
      <JsonPath Title="Email" Id="Email" Expr="email" Converter="String" Tag="email" HelpText="" DefaultValue=""/>
        <Compute Id="GroupUrl" Title="Group URL">
          <Compute.Expr>
            <![CDATA[
            http://www.facebook.com/@(Model.GroupIdInput)
            ]]>
          </Compute.Expr>
          <JsonPath Id="GroupIdInput" Expr="id" Converter="String"/>
        </Compute>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="GroupLookupBatch" Title="Group Lookup Batch">
    <Parameters>
			<Text Id="Ids" Title="Multiple Group Ids (Max 50)" Debug.DefaultValue="117245591640866" Required="true" HelpText="" Multiline="true"/>
    </Parameters>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/?ids=
        @(FetchIdsBatch())
        &fields=@SelectedFields()
        &access_token=@(Model.Authenticator.Token)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="$.*">
				<JsonPath Title="Name" Id="Name" Expr="name" Converter="String" Tag="name" HelpText=""/>
				<JsonPath Title="Group Id" Id="GroupId" Expr="id" Converter="String" Tag="id" HelpText=""/>
				<JsonPath Title="Privacy" Id="Privacy" Expr="privacy" Converter="String" Tag="privacy" HelpText=""/>
				<JsonPath Title="Members" Id="Members" Expr="members.summary.total_count" Converter="Int" Tag="members.summary(true)" HelpText=""/>
				<JsonPath Title="Description" Id="Description" Expr="description" Converter="String" Tag="description" HelpText="" DefaultValue=""/>
				<JsonPath Title="Owner" Id="Owner" Expr="owner.name" Converter="String" Tag="owner" HelpText="" DefaultValue=""/>
				<JsonPath Title="Cover Photo Link" Id="CoverPhotoLink" Expr="cover.source" Converter="String" Tag="cover" HelpText="" DefaultValue=""/>
				<JsonPath Title="Email" Id="Email" Expr="email" Converter="String" Tag="email" HelpText="" DefaultValue=""/>
        <Compute Id="GroupUrl" Title="Group URL">
          <Compute.Expr>
            <![CDATA[
            http://www.facebook.com/@(Model.GroupIdInput)
            ]]>
          </Compute.Expr>
          <JsonPath Id="GroupIdInput" Expr="id" Converter="String"/>
        </Compute>
			</JsonPath>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="PageAlbums" Title="Page Albums">
    <Parameters>
      <Text Id="Id" Title="Page Id" DefaultValue="" Required="true" Debug.DefaultValue="56796081303"/>
    </Parameters>
    <Paging PageSize="25">
      <Parse>
    <JsonPath Id="Cursor" Expr="paging.cursors.after"/>
      </Parse>
    </Paging>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/
        @(Model.Id)/albums?
        fields=@SelectedFields()
        &access_token=@(Model.Authenticator.Token)
        &limit=@(Model.PageCursor.NextTake)
        @if(Model.PageCursor.Page != 0)
        {
          @: &after=@(Model.Cursor)
        }
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="data.*">
        <JsonPath Title="Album Id" Id="AlbumId" Expr="id" Converter="String" Tag="id" HelpText=""/>
        <JsonPath Title="Name" Id="Name" Expr="name" Converter="String" Tag="name" HelpText="" DefaultValue=""/>
        <JsonPath Title="Description" Id="Description" Expr="description" Converter="String" Tag="description" HelpText="" DefaultValue=""/>
        <JsonPath Title="Photo Count" Id="PhotoCount" Expr="photo_count" Converter="Int" Tag="photo_count" HelpText=""/>
        <JsonPath Title="Video Count" Id="VideoCount" Expr="video_count" Converter="Int" Tag="video_count" HelpText=""/>
        <JsonPath Title="Likes Total" Id="LikesTotal" Expr="$.likes.summary.total_count" Converter="Int" Tag="likes.summary(true)" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Created" Id="Created" Expr="created_time" Converter="DateTime" Tag="created_time" HelpText=""/>
        <JsonPath Title="Album Link" Id="AlbumLink" Expr="link" Converter="String" Tag="link" HelpText=""/>
      </JsonPath>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="PageEvents" Title="Page Events">
    <Parameters>
      <Text Id="Id" Title="Page Id" DefaultValue="" Required="true" Debug.DefaultValue="12228681353" HelpText="Enter one or more Tweet Ids separated by a new line" Multiline="true"/>
    </Parameters>
    <Paging PageSize="25" EvenPages="false">
      <Parse>
    <JsonPath Id="Cursor" Expr="paging.cursors.after"/>
      </Parse>
    </Paging>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/events?
        id=@(Model.Id)
        &access_token=@(Model.Authenticator.Token)
        &limit=@(Model.PageCursor.NextTake)
        @if(Model.PageCursor.Page != 0)
        {
          @: &after=@(Model.Cursor)
        }
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="data.*">
        <JsonPath Title="Event Id" Id="EventId" Expr="id" Converter="String" HelpText=""/>
        <JsonPath Title="Event" Id="Event" Expr="name" Converter="String" HelpText="" DefaultValue=""/>
        <JsonPath Title="Description" Id="Description" Expr="description" Converter="String" HelpText="" DefaultValue=""/>
        <JsonPath Title="Location" Id="Location" Expr="place.name" Converter="String" HelpText="" DefaultValue=""/>
        <JsonPath Title="Country" Id="Country" Expr="place.location.country" Converter="String" HelpText="" DefaultValue=""/>
        <JsonPath Title="City" Id="City" Expr="place.location.city" Converter="String" HelpText="" DefaultValue=""/>
        <JsonPath Title="Street" Id="Street" Expr="place.location.street" Converter="String" HelpText="" DefaultValue=""/>
        <JsonPath Title="Start Time" Id="StartTime" Expr="start_time" Converter="DateTime" HelpText="" DefaultValue=""/>
        <JsonPath Title="End Time" Id="EndTime" Expr="end_time" Converter="DateTime" HelpText="" DefaultValue=""/>
        <Compute Id="EventUrl" Title="Event URL">
          <Compute.Expr>
            <![CDATA[
            http://www.facebook.com/events/@(Model.EventId)
            ]]>
          </Compute.Expr>
          <JsonPath Title="Event Id" Id="EventId" Expr="id" Converter="String"/>
        </Compute>
      </JsonPath>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="EventAttendings" Title="Event Attendings">
    <Parameters>
      <Text Id="Id" Title="Event Id" DefaultValue="" Required="true" Debug.DefaultValue="1620248291609521"/>
    </Parameters>
    <Paging PageSize="25" EvenPages="false">
      <Parse>
    <JsonPath Id="Cursor" Expr="paging.cursors.after"/>
      </Parse>
    </Paging>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/
        @(Model.Id)/attending?
        fields=@SelectedFields()
        &access_token=@(Model.Authenticator.Token)
        &limit=@(Model.PageCursor.NextTake)
        @if(Model.PageCursor.Page != 0)
        {
          @: &after=@(Model.Cursor)
        }
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="data.*">
        <JsonPath Title="Id" Id="Id" Expr="id" Converter="String" HelpText=""/>
        <JsonPath Title="Name" Id="Name" Expr="name" Converter="String" Tag="name" HelpText=""/>
        <JsonPath Title="RSVP" Id="Rsvp" Expr="rsvp_status" Converter="String" Tag="rsvp_status" HelpText=""/>
        <JsonPath Title="User Link" Id="Userlink" Expr="link" Converter="String" Tag="link" HelpText=""/>
      </JsonPath>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="GroupMembers" Title="Group Members">
    <Parameters>
      <Text Id="Id" Title="Group Id" DefaultValue="" Required="true" Debug.DefaultValue="1376464755984055"/>
    </Parameters>
    <Paging PageSize="25" EvenPages="false">
      <Parse>
    <JsonPath Id="Cursor" Expr="paging.cursors.after"/>
      </Parse>
    </Paging>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/
        @(Model.Id)/members?
        fields=@SelectedFields()
        &access_token=@(Model.Authenticator.Token)
        &limit=@(Model.PageCursor.NextTake)
        @if(Model.PageCursor.Page != 0)
        {
          @: &after=@(Model.Cursor)
        }
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="data.*">
        <JsonPath Title="Id" Id="Id" Expr="id" Converter="String" HelpText=""/>
        <JsonPath Title="Name" Id="Name" Expr="name" Converter="String" Tag="name" HelpText=""/>
        <JsonPath Title="Admin" Id="Admin" Expr="administrator" Converter="Bool" Tag="administrator" HelpText=""/>
        <JsonPath Title="User Link" Id="Userlink" Expr="link" Converter="String" Tag="link" HelpText=""/>
      </JsonPath>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="PageFeed" Title="Page Feed">
    <Parameters>
      <Text Id="Id" Title="Page Id" DefaultValue="" Required="true" Debug.DefaultValue="56796081303" HelpText="The feed of posts (including status updates) and links published by this page, or by others on this page."/>
      <Radio Id="PostType" Title="Post Type" DefaultValue="all" Required="false">
        <DataSource>
          <Item Id="feed" Title="Feed"/>
          <Item Id="posts" Title="Posts by Page"/>
          <Item Id="tagged" Title="Page tagged in"/>
        </DataSource>
      </Radio>
      <DateInterval Id="DateInterval" Title="Date Interval" Required="false" Nullable="true"/>
    </Parameters>
    <Paging PageSize="50" EvenPages="false">
      <Parse>
        <JsonPath Id="Cursor" Expr="paging.next"/>
      </Parse>
    </Paging>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/
        @(Model.Id)/@(Model.PostType)?
        fields=@SelectedFields()
        @if(Model.DateInterval.StartDate != null && Model.DateInterval.EndDate != null && Model.PageCursor.Page == 0)
        {
          @: &since=@(((DateTime)Model.DateInterval.StartDate).UnixTimeStampUtc())
          @: &until=@(((DateTime)Model.DateInterval.EndDate).UnixTimeStampUtc())
        }
        &access_token=@(Model.Authenticator.Token)
        &limit=@(Model.PageCursor.NextTake)
        @if(Model.PageCursor.Page != 0)
        {
          @: &after=@(Model.Cursor)
        }
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="data.*">
        <JsonPath Title="Post Id" Id="PostId" Expr="id" Converter="String" HelpText=""/>
        <JsonPath Title="Type" Id="Type" Expr="type" Converter="String" Tag="type" HelpText=""/>
        <JsonPath Title="Created" Id="Created" Expr="created_time" Converter="DateTime" Tag="created_time" HelpText=""/>
        <JsonPath Title="Message" Id="Message" Expr="message" Converter="String" Tag="message" HelpText="" DefaultValue=""/>
        <JsonPath Title="Description" Id="Description" Expr="description" Converter="String" Tag="description" HelpText="" DefaultValue=""/>
        <JsonPath Title="Likes" Id="Likes" Expr="$.likes.summary.total_count" Converter="Int" Tag="likes.summary(true)" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Comments" Id="Comments" Expr="$.comments.summary.total_count" Converter="Int" Tag="comments.summary(true)" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Shares" Id="Shares" Expr="$.shares.count" Converter="Int" Tag="shares" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Reactions" Id="Reactions" Expr="$.reactions.summary.total_count" Converter="Int" Tag="reactions.summary(true)" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Author Id" Id="AuthorId" Expr="$.from.id" Converter="String" Tag="from" HelpText="" DefaultValue=""/>
        <JsonPath Title="Author" Id="Author" Expr="$.from.name" Converter="String" Tag="from" HelpText="" DefaultValue=""/>
        <JsonPath Title="Post Link" Id="PostLink" Expr="permalink_url" Converter="String" Tag="permalink_url" HelpText=""/>
        <JsonPath Title="Picture Link" Id="PictureLink" Expr="link" Converter="String" Tag="link" HelpText="" DefaultValue=""/>
      </JsonPath>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="GroupFeed" Title="Group Feed">
    <Parameters>
      <Text Id="Id" Title="Page Id" DefaultValue="" Required="true" Debug.DefaultValue="118189851672589" HelpText="The feed of posts including status updates and links published to this group."/>
      <DateInterval Id="DateInterval" Title="Date Interval" Required="false" Nullable="true"/>
    </Parameters>
    <Paging PageSize="100" EvenPages="false">
      <Parse>
        <JsonPath Id="Cursor" Expr="paging.next"/>
      </Parse>
    </Paging>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/
        @(Model.Id)/feed?
        fields=@SelectedFields()
        @if(Model.DateInterval.StartDate != null && Model.DateInterval.EndDate != null && Model.PageCursor.Page == 0)
        {
          @: &since=@(((DateTime)Model.DateInterval.StartDate).UnixTimeStampUtc())
          @: &until=@(((DateTime)Model.DateInterval.EndDate).UnixTimeStampUtc())
        }
        &access_token=@(Model.Authenticator.Token)
        &limit=@(Model.PageCursor.NextTake)
        @if(Model.PageCursor.Page != 0)
        {
          @: &after=@(Model.Cursor)
        }
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="data.*">
        <JsonPath Title="Post Id" Id="PostId" Expr="id" Converter="String" HelpText=""/>
        <JsonPath Title="Type" Id="Type" Expr="type" Converter="String" Tag="type" HelpText=""/>
        <JsonPath Title="Created" Id="Created" Expr="created_time" Converter="DateTime" Tag="created_time" HelpText=""/>
        <JsonPath Title="Message" Id="Message" Expr="message" Converter="String" Tag="message" HelpText="" DefaultValue=""/>
        <JsonPath Title="Description" Id="Description" Expr="description" Converter="String" Tag="description" HelpText="" DefaultValue=""/>
        <JsonPath Title="Likes" Id="Likes" Expr="$.likes.summary.total_count" Converter="Int" Tag="likes.summary(true)" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Comments" Id="Comments" Expr="$.comments.summary.total_count" Converter="Int" Tag="comments.summary(true)" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Shares" Id="Shares" Expr="$.shares.count" Converter="Int" Tag="shares" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Reactions" Id="Reactions" Expr="$.reactions.summary.total_count" Converter="Int" Tag="reactions.summary(true)" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Author Id" Id="AuthorId" Expr="$.from.id" Converter="String" Tag="from" HelpText="" DefaultValue=""/>
        <JsonPath Title="Author" Id="Author" Expr="$.from.name" Converter="String" Tag="from" HelpText="" DefaultValue=""/>
        <JsonPath Title="Post Link" Id="PostLink" Expr="permalink_url" Converter="String" Tag="permalink_url" HelpText=""/>
        <JsonPath Title="Picture Link" Id="PictureLink" Expr="link" Converter="String" Tag="link" HelpText="" DefaultValue=""/>
      </JsonPath>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="EventFeed" Title="Event Feed">
    <Parameters>
      <Text Id="Id" Title="Event Id" DefaultValue="" Required="true" Debug.DefaultValue="1862720350669372" HelpText="The feed of posts including status updates and links published to this Event's wall."/>
      <DateInterval Id="DateInterval" Title="Date Interval" Required="false" Nullable="true"/>
    </Parameters>
    <Paging PageSize="100" EvenPages="false">
      <Parse>
        <JsonPath Id="Cursor" Expr="paging.next"/>
      </Parse>
    </Paging>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/
        @(Model.Id)/feed?
        fields=@SelectedFields()
        @if(Model.DateInterval.StartDate != null && Model.DateInterval.EndDate != null && Model.PageCursor.Page == 0)
        {
          @: &since=@(((DateTime)Model.DateInterval.StartDate).UnixTimeStampUtc())
          @: &until=@(((DateTime)Model.DateInterval.EndDate).UnixTimeStampUtc())
        }
        &access_token=@(Model.Authenticator.Token)
        &limit=@(Model.PageCursor.NextTake)
        @if(Model.PageCursor.Page != 0)
        {
          @: &after=@(Model.Cursor)
        }
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="data.*">
        <JsonPath Title="Post Id" Id="PostId" Expr="id" Converter="String" HelpText=""/>
        <JsonPath Title="Type" Id="Type" Expr="type" Converter="String" Tag="type" HelpText=""/>
        <JsonPath Title="Created" Id="Created" Expr="created_time" Converter="DateTime" Tag="created_time" HelpText=""/>
        <JsonPath Title="Message" Id="Message" Expr="message" Converter="String" Tag="message" HelpText="" DefaultValue=""/>
        <JsonPath Title="Description" Id="Description" Expr="description" Converter="String" Tag="description" HelpText="" DefaultValue=""/>
        <JsonPath Title="Likes" Id="Likes" Expr="$.likes.summary.total_count" Converter="Int" Tag="likes.summary(true)" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Comments" Id="Comments" Expr="$.comments.summary.total_count" Converter="Int" Tag="comments.summary(true)" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Shares" Id="Shares" Expr="$.shares.count" Converter="Int" Tag="shares" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Reactions" Id="Reactions" Expr="$.reactions.summary.total_count" Converter="Int" Tag="reactions.summary(true)" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Author Id" Id="AuthorId" Expr="$.from.id" Converter="String" Tag="from" HelpText="" DefaultValue=""/>
        <JsonPath Title="Author" Id="Author" Expr="$.from.name" Converter="String" Tag="from" HelpText="" DefaultValue=""/>
        <JsonPath Title="Post Link" Id="PostLink" Expr="permalink_url" Converter="String" Tag="permalink_url" HelpText=""/>
        <JsonPath Title="Picture Link" Id="PictureLink" Expr="link" Converter="String" Tag="link" HelpText="" DefaultValue=""/>
      </JsonPath>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="PageVideos" Title="Page Videos">
    <Parameters>
      <Text Id="Id" Title="Page Id" DefaultValue="" Required="true" Debug.DefaultValue="56796081303" HelpText=""/>
      <DateInterval Id="DateInterval" Title="Date Interval" Required="false" Nullable="true"/>
    </Parameters>
    <Paging PageSize="25">
      <Parse>
    <JsonPath Id="Cursor" Expr="paging.cursors.after"/>
      </Parse>
    </Paging>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/
        @(Model.Id)/videos?
        fields=@SelectedFields()
        @if(Model.DateInterval.StartDate != null && Model.DateInterval.EndDate != null && Model.PageCursor.Page == 0)
        {
          @: &until=@(((DateTime)Model.DateInterval.EndDate).UnixTimeStampUtc())
        }
        @if(Model.DateInterval.StartDate != null && Model.DateInterval.EndDate != null)
        {
          @: &since=@(((DateTime)Model.DateInterval.StartDate).UnixTimeStampUtc())
        }
        &access_token=@(Model.Authenticator.Token)
        &limit=@(Model.PageCursor.NextTake)
        @if(Model.PageCursor.Page != 0)
        {
          @: &after=@(Model.Cursor)
        }
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="data.*">
        <JsonPath Title="Video Id" Id="VideoId" Expr="id" Converter="String" HelpText=""/>
        <JsonPath Title="Created" Id="Created" Expr="created_time" Converter="DateTime" Tag="created_time" HelpText=""/>
        <JsonPath Title="Message" Id="Message" Expr="message" Converter="String" Tag="message" HelpText="" DefaultValue=""/>
        <JsonPath Title="Description" Id="Description" Expr="description" Converter="String" Tag="description" HelpText="" DefaultValue=""/>
        <JsonPath Title="Likes" Id="Likes" Expr="$.likes.summary.total_count" Converter="Int" Tag="likes.summary(true)" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Comments" Id="Comments" Expr="$.comments.summary.total_count" Converter="Int" Tag="comments.summary(true)" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Length" Id="Length" Expr="length" Converter="Double" Tag="length" HelpText="" DefaultValue=""/>
        <Compute Id="VideoLink" Title="Video Link" Tag="permalink_url" HelpText="">
          <Compute.Expr>
            <![CDATA[
            https://www.facebook.com@(Model.PermalinkInput)
            ]]>
          </Compute.Expr>
          <JsonPath Expr="permalink_url" Id="PermalinkInput" Converter="String"/>
        </Compute>
      </JsonPath>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="PagePhotos" Title="Page Photos">
    <Parameters>
      <Text Id="Id" Title="Page Id" DefaultValue="" Required="true" Debug.DefaultValue="56796081303" HelpText=""/>
      <DateInterval Id="DateInterval" Title="Date Interval" Required="false" Nullable="true"/>
    </Parameters>
    <Paging PageSize="25" EvenPages="false">
      <Parse>
    <JsonPath Id="Cursor" Expr="paging.cursors.after"/>
      </Parse>
    </Paging>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/
        @(Model.Id)/photos?
        fields=@SelectedFields()
        @if(Model.DateInterval.StartDate != null && Model.DateInterval.EndDate != null && Model.PageCursor.Page == 0)
        {
          @: &until=@(((DateTime)Model.DateInterval.EndDate).UnixTimeStampUtc())
        }
        @if(Model.DateInterval.StartDate != null && Model.DateInterval.EndDate != null)
        {
          @: &since=@(((DateTime)Model.DateInterval.StartDate).UnixTimeStampUtc())
        }
        &access_token=@(Model.Authenticator.Token)
        &limit=@(Model.PageCursor.NextTake)
        @if(Model.PageCursor.Page != 0)
        {
          @: &after=@(Model.Cursor)
        }
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="data.*">
        <JsonPath Title="Post Id" Id="PostId" Expr="id" Converter="String" HelpText=""/>
        <JsonPath Title="Created" Id="Created" Expr="created_time" Converter="DateTime" Tag="created_time" HelpText=""/>
        <JsonPath Title="Likes" Id="Likes" Expr="$.likes.summary.total_count" Converter="Int" Tag="likes.summary(true)" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Comments" Id="Comments" Expr="$.comments.summary.total_count" Converter="Int" Tag="comments.summary(true)" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Post Link" Id="PostLink" Expr="link" Converter="String" Tag="link" HelpText="" DefaultValue=""/>
        <JsonPath Title="Picture Link" Id="PictureLink" Expr="picture" Converter="String" Tag="picture" HelpText="" DefaultValue=""/>
      </JsonPath>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="PostLikes" Title="Post Likes">
    <Parameters>
      <Text Id="Id" Title="Id (Use 'PageId_PostId' Format)" DefaultValue="" Required="true" Debug.DefaultValue="56796081303_10154300423791304" HelpText=""/>
    </Parameters>
    <Paging PageSize="25" EvenPages="false">
      <Parse>
    <JsonPath Id="Cursor" Expr="paging.cursors.after"/>
      </Parse>
    </Paging>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/
        @(Model.Id)/likes?
        fields=@SelectedFields()
        &access_token=@(Model.Authenticator.Token)
        &limit=@(Model.PageCursor.NextTake)
        @if(Model.PageCursor.Page != 0)
        {
          @: &after=@(Model.Cursor)
        }
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="data.*">
        <JsonPath Title="User Id" Id="UserId" Expr="id" Converter="String" HelpText=""/>
        <JsonPath Title="Name" Id="Name" Expr="name" Converter="String" Tag="name" HelpText=""/>
        <JsonPath Title="User URL" Id="UserUrl" Expr="link" Converter="String" Tag="link" HelpText=""/>
      </JsonPath>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="Comments" Title="Comments">
    <Parameters>
      <Text Id="Id" Title="Id (Post_Id, Event_Id etc)" DefaultValue="" Required="true" Debug.DefaultValue="56796081303_10154300423791304" HelpText=""/>
    </Parameters>
    <Paging PageSize="25" EvenPages="false">
      <Parse>
    <JsonPath Id="Cursor" Expr="paging.cursors.after"/>
      </Parse>
    </Paging>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/
        @(Model.Id)/comments?
        fields=@SelectedFields()
        &access_token=@(Model.Authenticator.Token)
        &limit=@(Model.PageCursor.NextTake)
        @if(Model.PageCursor.Page != 0)
        {
          @: &after=@(Model.Cursor)
        }
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="data.*">
        <JsonPath Title="Comment Id" Id="CommentId" Expr="id" Converter="String" Tag="Id" HelpText=""/>
        <JsonPath Title="Comment" Id="Comment" Expr="message" Converter="String" Tag="message" HelpText=""/>
        <JsonPath Title="Likes" Id="Likes" Expr="like_count" Converter="Int" Tag="like_count" HelpText=""/>
        <JsonPath Title="Comments" Id="Comments" Expr="comment_count" Converter="Int" Tag="comment_count" HelpText=""/>
        <JsonPath Title="Created" Id="Created" Expr="created_time" Converter="DateTime" Tag="created_time" HelpText=""/>
        <JsonPath Title="User Id" Id="UserId" Expr="from.id" Converter="String" Tag="from" HelpText=""/>
        <JsonPath Title="User Name" Id="UserName" Expr="from.name" Converter="String" Tag="from" HelpText=""/>
        <JsonPath Title="Comment Link" Id="CommentLink" Expr="permalink_url" Converter="String" Tag="permalink_url" HelpText="" DefaultValue=""/>
      </JsonPath>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message" Converter="String"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="PostLookup" Title="Post Lookup">
    <Parameters>
      <Text Id="PostId" Title="Post Id (Use 'PageId_PostId' Format)" DefaultValue="" Debug.DefaultValue="56796081303_10154300423791304" HelpText="" Required="true"/>
    </Parameters>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/?id=
        @(Model.PostId)
        &fields=@SelectedFields()
        &access_token=@(Model.Authenticator.Token)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Title="Post Id" Id="PostId" Expr="$.id" Converter="String" HelpText="" DefaultValue=""/>
      <JsonPath Title="Message" Id="Message" Expr="$.message" Converter="String" Tag="message" HelpText="" DefaultValue=""/>
      <JsonPath Title="Description" Id="Description" Expr="$.description" Converter="String" Tag="description" HelpText="" DefaultValue=""/>
      <JsonPath Title="Type" Id="Type" Expr="$.type" Converter="String" Tag="type" HelpText="" DefaultValue=""/>
      <JsonPath Title="Likes" Id="Likes" Expr="$.likes.summary.total_count" Converter="Int" Tag="likes.summary(true)" HelpText="" DefaultValue="0"/>
      <JsonPath Title="Comments" Id="Comments" Expr="$.comments.summary.total_count" Converter="Int" Tag="comments.summary(true)" HelpText="" DefaultValue="0"/>
      <JsonPath Title="Shares" Id="Shares" Expr="$.shares.count" Converter="Int" Tag="shares" HelpText="" DefaultValue="0"/>
      <JsonPath Title="Love" Id="Love" Expr="$.reactions_love.summary.total_count" Converter="Int" Tag="reactions.type(LOVE).limit(0).summary(total_count).as(reactions_love)" HelpText="" DefaultValue=""/>
      <JsonPath Title="Wow" Id="Wow" Expr="$.reactions_wow.summary.total_count" Converter="Int" Tag="reactions.type(WOW).limit(0).summary(total_count).as(reactions_wow)" HelpText="" DefaultValue=""/>
      <JsonPath Title="Haha" Id="Haha" Expr="$.reactions_haha.summary.total_count" Converter="Int" Tag="reactions.type(HAHA).limit(0).summary(total_count).as(reactions_haha)" HelpText="" DefaultValue=""/>
      <JsonPath Title="Sad" Id="Sad" Expr="$.reactions_sad.summary.total_count" Converter="Int" Tag="reactions.type(SAD).limit(0).summary(total_count).as(reactions_sad)" HelpText="" DefaultValue=""/>
      <JsonPath Title="Angry" Id="Angry" Expr="$.reactions_angry.summary.total_count" Converter="Int" Tag="reactions.type(ANGRY).limit(0).summary(total_count).as(reactions_angry)" HelpText="" DefaultValue=""/>
      <JsonPath Title="Created" Id="Created" Expr="$.created_time" Converter="DateTime" Tag="created_time" HelpText=""/>
      <JsonPath Title="Author Id" Id="AuthorId" Expr="$.from.id" Converter="String" Tag="from" HelpText=""/>
      <JsonPath Title="Author" Id="Author" Expr="$.from.name" Converter="String" Tag="from" HelpText=""/>
      <JsonPath Title="Permalink" Id="Permalink" Expr="$.permalink_url" Converter="String" Tag="permalink_url" HelpText="" DefaultValue=""/>
      <JsonPath Title="Picture URL" Id="PictureUrl" Expr="$.picture" Converter="String" Tag="picture" HelpText="" DefaultValue=""/>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="PostLookupBatch" Title="Post Lookup Batch">
    <Parameters>
      <Text Id="Ids" Title="Multiple Post Ids (Max 50) (Use 'PageId_PostId' Format)" DefaultValue="" Debug.DefaultValue="56796081303_10154300423791304" HelpText="" Required="true" Multiline="true"/>
    </Parameters>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/?ids=
        @(FetchIdsBatch())
        &fields=@SelectedFields()
        &access_token=@(Model.Authenticator.Token)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="$.*">
        <JsonPath Title="Post Id" Id="PostId" Expr="id" Converter="String" HelpText="" DefaultValue=""/>
        <JsonPath Title="Message" Id="Message" Expr="message" Converter="String" Tag="message" HelpText="" DefaultValue=""/>
        <JsonPath Title="Description" Id="Description" Expr="description" Converter="String" Tag="description" HelpText="" DefaultValue=""/>
        <JsonPath Title="Type" Id="Type" Expr="type" Converter="String" Tag="type" HelpText="" DefaultValue=""/>
        <JsonPath Title="Likes" Id="Likes" Expr="likes.summary.total_count" Converter="Int" Tag="likes.summary(true)" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Comments" Id="Comments" Expr="comments.summary.total_count" Converter="Int" Tag="comments.summary(true)" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Shares" Id="Shares" Expr="shares.count" Converter="Int" Tag="shares" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Love" Id="Love" Expr="reactions_love.summary.total_count" Converter="Int" Tag="reactions.type(LOVE).limit(0).summary(total_count).as(reactions_love)" HelpText="" DefaultValue=""/>
        <JsonPath Title="Wow" Id="Wow" Expr="reactions_wow.summary.total_count" Converter="Int" Tag="reactions.type(WOW).limit(0).summary(total_count).as(reactions_wow)" HelpText="" DefaultValue=""/>
        <JsonPath Title="Haha" Id="Haha" Expr="reactions_haha.summary.total_count" Converter="Int" Tag="reactions.type(HAHA).limit(0).summary(total_count).as(reactions_haha)" HelpText="" DefaultValue=""/>
        <JsonPath Title="Sad" Id="Sad" Expr="reactions_sad.summary.total_count" Converter="Int" Tag="reactions.type(SAD).limit(0).summary(total_count).as(reactions_sad)" HelpText="" DefaultValue=""/>
        <JsonPath Title="Angry" Id="Angry" Expr="reactions_angry.summary.total_count" Converter="Int" Tag="reactions.type(ANGRY).limit(0).summary(total_count).as(reactions_angry)" HelpText="" DefaultValue=""/>
        <JsonPath Title="Created" Id="Created" Expr="created_time" Converter="DateTime" Tag="created_time" HelpText=""/>
        <JsonPath Title="Author Id" Id="AuthorId" Expr="from.id" Converter="String" Tag="from" HelpText=""/>
        <JsonPath Title="Author" Id="Author" Expr="from.name" Converter="String" Tag="from" HelpText=""/>
        <JsonPath Title="Permalink" Id="Permalink" Expr="permalink_url" Converter="String" Tag="permalink_url" HelpText="" DefaultValue=""/>
        <JsonPath Title="Picture URL" Id="PictureUrl" Expr="picture" Converter="String" Tag="picture" HelpText="" DefaultValue=""/>
      </JsonPath>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="CommentLookup" Title="Comment Lookup">
    <Parameters>
      <Text Id="CommentId" Title="Comment Id (Use 'PostId_CommentId' Format)" DefaultValue="" Debug.DefaultValue="1531576806852516_1531721810171349" HelpText="" Required="true"/>
    </Parameters>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/?id=
        @(Model.CommentId)
        &fields=@SelectedFields()
        &access_token=@(Model.Authenticator.Token)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Title="Comment Id" Id="CommentId" Expr="id" Converter="String" HelpText=""/>
      <JsonPath Title="Comment" Id="Comment" Expr="message" Converter="String" Tag="message" HelpText=""/>
      <JsonPath Title="Likes" Id="Likes" Expr="like_count" Converter="Int" Tag="like_count" HelpText=""/>
      <JsonPath Title="Comments" Id="Comments" Expr="comment_count" Converter="Int" Tag="comment_count" HelpText=""/>
      <JsonPath Title="Created" Id="Created" Expr="created_time" Converter="DateTime" Tag="created_time" HelpText=""/>
      <JsonPath Title="User Id" Id="UserId" Expr="from.id" Converter="String" Tag="from" HelpText=""/>
      <JsonPath Title="User Name" Id="UserName" Expr="from.name" Converter="String" Tag="from" HelpText=""/>
      <JsonPath Title="Comment Link" Id="CommentLink" Expr="permalink_url" Converter="String" Tag="permalink_url" HelpText="" DefaultValue=""/>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="CommentsLookup" Title="Comment Lookup Batch">
    <Parameters>
      <Text Id="Ids" Title="Multiple Comment Ids (Max 50) (Use 'PostId_CommentId' Format)" DefaultValue="" Debug.DefaultValue="1531576806852516_1531721810171349" HelpText="" Required="true" Multiline="true"/>
    </Parameters>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/?ids=
        @(FetchIdsBatch())
        &fields=@SelectedFields()
        &access_token=@(Model.Authenticator.Token)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="$.*">
        <JsonPath Title="Comment Id" Id="CommentId" Expr="id" Converter="String" HelpText=""/>
        <JsonPath Title="Comment" Id="Comment" Expr="message" Converter="String" Tag="message" HelpText=""/>
        <JsonPath Title="Likes" Id="Likes" Expr="like_count" Converter="Int" Tag="like_count" HelpText=""/>
        <JsonPath Title="Comments" Id="Comments" Expr="comment_count" Converter="Int" Tag="comment_count" HelpText=""/>
        <JsonPath Title="Created" Id="Created" Expr="created_time" Converter="DateTime" Tag="created_time" HelpText=""/>
        <JsonPath Title="User Id" Id="UserId" Expr="from.id" Converter="String" Tag="from" HelpText=""/>
        <JsonPath Title="User Name" Id="UserName" Expr="from.name" Converter="String" Tag="from" HelpText=""/>
        <JsonPath Title="Comment Link" Id="CommentLink" Expr="permalink_url" Converter="String" Tag="permalink_url" HelpText="" DefaultValue=""/>
      </JsonPath>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="PageSearch" Title="Page Search">
    <Parameters>
      <Text Id="Query" Title="Query" DefaultValue="" Required="true" Debug.DefaultValue="jultomte" HelpText=""/>
    </Parameters>
    <Paging PageSize="25" EvenPages="false">
      <Parse>
    <JsonPath Id="Cursor" Expr="paging.cursors.after"/>
      </Parse>
    </Paging>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/search?
        q=@Utils.UrlEncode(Model.Query)
        &type=page
        &access_token=@(Model.Authenticator.Token)
        &fields=@SelectedFields()
        &limit=@(Model.PageCursor.NextTake)
        @if(Model.PageCursor.Page != 0)
        {
          @: &after=@(Model.Cursor)
        }
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="data.*">
          <JsonPath Title="Page Id" Id="PageId" Expr="id" Converter="String" Tag="id" HelpText=""/>
          <JsonPath Title="Name" Id="Name" Expr="name" Converter="String" Tag="name" HelpText=""/>
          <JsonPath Title="Category" Id="Category" Expr="category" Converter="String" Tag="category" HelpText=""/>
          <JsonPath Title="About" Id="About" Expr="about" Converter="String" Tag="about" HelpText="" DefaultValue=""/>
          <JsonPath Title="Description" Id="Description" Expr="description" Converter="String" Tag="description" HelpText="" DefaultValue=""/>
          <JsonPath Title="Checkins" Id="checkins" Expr="checkins" Converter="Int" Tag="checkins" HelpText=""/>
          <JsonPath Title="Fans" Id="Fans" Expr="fan_count" Converter="Int" Tag="fan_count" HelpText=""/>
          <JsonPath Title="Talking About" Id="TalkingAbout" Expr="talking_about_count" Converter="Int" Tag="talking_about_count" HelpText=""/>
          <JsonPath Title="Cover Photo Link" Id="CoverPhotoLink" Expr="cover.source" Converter="String" Tag="cover" HelpText="" DefaultValue=""/>
          <JsonPath Title="Website" Id="Website" Expr="website" Converter="String" Tag="website" HelpText="" DefaultValue=""/>
          <JsonPath Title="Page Link" Id="PageLink" Expr="link" Converter="String" Tag="link" HelpText=""/>
        </JsonPath>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="GroupSearch" Title="Group Search">
    <Parameters>
      <Text Id="Query" Title="Query" DefaultValue="" Required="true" Debug.DefaultValue="jultomte" HelpText=""/>
    </Parameters>
    <Paging PageSize="25" EvenPages="false">
      <Parse>
    <JsonPath Id="Cursor" Expr="paging.cursors.after"/>
      </Parse>
    </Paging>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/search?
        q=@Utils.UrlEncode(Model.Query)
        &type=group
        &access_token=@(Model.Authenticator.Token)
        &fields=@SelectedFields()
        &limit=@(Model.PageCursor.NextTake)
        @if(Model.PageCursor.Page != 0)
        {
          @: &after=@(Model.Cursor)
        }
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="data.*">
        <JsonPath Title="Group Id" Id="GroupId" Expr="id" Converter="String" Tag="id" HelpText=""/>
        <JsonPath Title="Group" Id="Group" Expr="name" Converter="String" Tag="name" HelpText=""/>
        <JsonPath Title="Privacy" Id="Privacy" Expr="privacy" Converter="String" Tag="privacy" HelpText=""/>
        <JsonPath Title="Description" Id="Description" Expr="description" Converter="String" Tag="description" DefaultValue="" HelpText=""/>
        <JsonPath Title="Cover Photo Link" Id="CoverPhotoLink" Expr="cover.source" Converter="String" Tag="cover" HelpText="" DefaultValue=""/>
        <JsonPath Title="Owner Id" Id="OwnerId" Expr="owner.id" Converter="String" Tag="owner" HelpText="" DefaultValue=""/>
        <JsonPath Title="Owner" Id="Owner" Expr="owner.name" Converter="String" Tag="owner" HelpText="" DefaultValue=""/>
        <Compute Id="GroupUrl" Title="Group URL">
          <Compute.Expr>
            <![CDATA[
            http://www.facebook.com/groups/@(Model.GroupId)
            ]]>
          </Compute.Expr>
          <JsonPath Title="Group Id" Id="GroupId" Expr="id" Converter="String"/>
        </Compute>
      </JsonPath>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="EventSearch" Title="Event Search">
    <Parameters>
      <Text Id="Query" Title="Query" DefaultValue="" Required="true" Debug.DefaultValue="growth" HelpText=""/>
    </Parameters>
    <Paging PageSize="25" EvenPages="false">
      <Parse>
        <JsonPath Id="Cursor" Expr="paging.cursors.after"/>
      </Parse>
    </Paging>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/search?
        q=@Utils.UrlEncode(Model.Query)
        &type=event
        &access_token=@(Model.Authenticator.Token)
        &fields=@SelectedFields()
        &limit=@(Model.PageCursor.NextTake)
        @if(Model.PageCursor.Page != 0)
        {
          @: &after=@(Model.Cursor)
        }
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="data.*">
        <JsonPath Title="Event Id" Id="EventId" Expr="id" Converter="String" HelpText=""/>
        <JsonPath Title="Event" Id="Event" Expr="name" Converter="String" Tag="name" HelpText="" DefaultValue=""/>
        <JsonPath Title="Category" Id="Category" Expr="category" Converter="String" Tag="category" HelpText="" DefaultValue=""/>
        <JsonPath Title="Type" Id="Type" Expr="type" Converter="String" Tag="type" HelpText="" DefaultValue=""/>
        <JsonPath Title="Attending" Id="Attending" Expr="attending_count" Converter="Int" Tag="attending_count" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Declined" Id="Declined" Expr="declined_count" Converter="Int" Tag="declined_count" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Interested" Id="Interested" Expr="interested_count" Converter="Int" Tag="interested_count" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Maybies" Id="Maybies" Expr="maybe_count" Converter="Int" Tag="maybe_count" HelpText="" DefaultValue="0"/>
        <JsonPath Title="Description" Id="Description" Expr="description" Converter="String" Tag="description" HelpText="" DefaultValue=""/>
        <JsonPath Title="Location" Id="Location" Expr="place.name" Converter="String" HelpText="" Tag="place" DefaultValue=""/>
        <JsonPath Title="Country" Id="Country" Expr="place.location.country" Converter="String" HelpText="" Tag="place" DefaultValue=""/>
        <JsonPath Title="City" Id="City" Expr="place.location.city" Converter="String" HelpText="" Tag="place" DefaultValue=""/>
        <JsonPath Title="Start Time" Id="StartTime" Expr="start_time" Converter="DateTime" HelpText="" Tag="start_time" DefaultValue=""/>
        <JsonPath Title="Owner Id" Id="OwnerId" Expr="owner.id" Converter="String" Tag="owner" HelpText="" DefaultValue=""/>
        <JsonPath Title="Owner" Id="Owner" Expr="owner.name" Converter="String" Tag="owner" HelpText="" DefaultValue=""/>
        <Compute Id="EventUrl" Title="Event URL">
          <Compute.Expr>
            <![CDATA[
            http://www.facebook.com/events/@(Model.EventId)
            ]]>
          </Compute.Expr>
          <JsonPath Title="Event Id" Id="EventId" Expr="id" Converter="String"/>
        </Compute>
      </JsonPath>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="UserSearch" Title="User Search">
    <Parameters>
      <Text Id="Query" Title="Query" DefaultValue="" Required="true" Debug.DefaultValue="smith" HelpText="Search for a person (if they allow their name to be searched for)."/>
    </Parameters>
    <Paging PageSize="25" EvenPages="false">
      <Parse>
        <JsonPath Id="NextUrl" Expr="paging.next"/>
      </Parse>
    </Paging>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/search?
        &q=@Utils.UrlEncode(Model.Query)
        &type=user
        &access_token=@(Model.Authenticator.Token)
        &fields=@SelectedFields()
        &limit=@(Model.PageCursor.NextTake)
        &offset=@(Model.PageCursor.NextSkip)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="data.*">
        <JsonPath Title="User Id" Id="UserId" Expr="id" Converter="String" Tag="id" HelpText=""/>
        <JsonPath Title="Name" Id="Name" Expr="name" Converter="String" Tag="name" HelpText=""/>
        <JsonPath Title="Cover Photo Link" Id="CoverPhotoLink" Expr="cover.source" Converter="String" Tag="cover" HelpText="" DefaultValue=""/>
        <JsonPath Title="User URL" Id="UserUrl" Expr="link" Converter="String" Tag="link" HelpText="" DefaultValue=""/>
      </JsonPath>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="PlaceSearch" Title="Place Search">
    <Parameters>
      <Text Id="Query" Title="Query" DefaultValue="" Debug.DefaultValue="Stureplan" Required="true" HelpText=""/>
    </Parameters>
    <Paging PageSize="25" EvenPages="false">
      <Parse>
        <JsonPath Id="NextUrl" Expr="paging.next"/>
      </Parse>
    </Paging>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/search?
        &q=@Utils.UrlEncode(Model.Query)
        &type=place
        &access_token=@(Model.Authenticator.Token)
        &fields=@SelectedFields()
        &limit=@(Model.PageCursor.NextTake)
        &offset=@(Model.PageCursor.NextSkip)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="data.*">
        <JsonPath Title="Place Id" Id="PlaceId" Expr="id" Converter="String" Tag="id" HelpText=""/>
        <JsonPath Title="Name" Id="Name" Expr="name" Converter="String" Tag="name" HelpText=""/>
        <JsonPath Title="Checkins" Id="Checkins" Expr="checkins" Converter="Int" Tag="checkins" HelpText=""/>
        <JsonPath Title="Country" Id="Country" Expr="location.country" Converter="String" HelpText="" Tag="location" DefaultValue=""/>
        <JsonPath Title="City" Id="City" Expr="location.city" Converter="String" HelpText="" Tag="location" DefaultValue=""/>
        <JsonPath Title="Place URL" Id="PlaceUrl" Expr="link" Converter="String" Tag="link" HelpText="" DefaultValue=""/>
      </JsonPath>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="EventLookup" Title="Event Lookup">
    <Parameters>
      <Text Id="EventId" Title="Event Id" Debug.DefaultValue="1571374623164116" Required="true" HelpText=""/>
    </Parameters>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/@(Model.EventId)
        ?fields=@SelectedFields()
        &access_token=@(Model.Authenticator.Token)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Title="Event Id" Id="EventId" Expr="id" Converter="String" HelpText=""/>
      <JsonPath Title="Event" Id="Event" Expr="name" Converter="String" Tag="name" HelpText="" DefaultValue=""/>
      <JsonPath Title="Category" Id="Category" Expr="category" Converter="String" Tag="category" HelpText="" DefaultValue=""/>
      <JsonPath Title="Type" Id="Type" Expr="type" Converter="String" Tag="type" HelpText="" DefaultValue=""/>
      <JsonPath Title="Attending" Id="Attending" Expr="attending_count" Converter="Int" Tag="attending_count" HelpText="" DefaultValue="0"/>
      <JsonPath Title="Declined" Id="Declined" Expr="declined_count" Converter="Int" Tag="declined_count" HelpText="" DefaultValue="0"/>
      <JsonPath Title="Interested" Id="Interested" Expr="interested_count" Converter="Int" Tag="interested_count" HelpText="" DefaultValue="0"/>
      <JsonPath Title="Maybies" Id="Maybies" Expr="maybe_count" Converter="Int" Tag="maybe_count" HelpText="" DefaultValue="0"/>
      <JsonPath Title="Description" Id="Description" Expr="description" Converter="String" Tag="description" HelpText="" DefaultValue=""/>
      <JsonPath Title="Location" Id="Location" Expr="place.name" Converter="String" HelpText="" Tag="place" DefaultValue=""/>
      <JsonPath Title="Country" Id="Country" Expr="place.location.country" Converter="String" HelpText="" Tag="place" DefaultValue=""/>
      <JsonPath Title="City" Id="City" Expr="place.location.city" Converter="String" HelpText="" Tag="place" DefaultValue=""/>
      <JsonPath Title="Start Time" Id="StartTime" Expr="start_time" Converter="DateTime" HelpText="" Tag="start_time" DefaultValue=""/>
      <JsonPath Title="Owner Id" Id="OwnerId" Expr="owner.id" Converter="String" Tag="owner" HelpText="" DefaultValue=""/>
      <JsonPath Title="Owner" Id="Owner" Expr="owner.name" Converter="String" Tag="owner" HelpText="" DefaultValue=""/>
      <Compute Id="EventUrl" Title="Event URL">
        <Compute.Expr>
          <![CDATA[
          http://www.facebook.com/events/@(Model.EventId)
          ]]>
        </Compute.Expr>
        <JsonPath Title="Event Id" Id="EventId" Expr="id" Converter="String"/>
      </Compute>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

 <RestConnector Id="URLEngagement" Title="URL Engagement" HelpText="Engagement for single external URL">
    <Parameters>
      <Text Id="Url" Title="URL" Required="true"/>
    </Parameters>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.9?id=@Utils.UrlEncode(Utils.UrlProperty(Model.Url).Absolute)
        &fields=engagement
        &access_token=@(Model.Authenticator.Token)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Title="Shares" Id="Shares" Expr="engagement.share_count" Converter="Int"/>
      <JsonPath Title="Comments" Id="Comments" Expr="engagement.comment_count" Converter="Int"/>
      <JsonPath Title="Reactions" Id="Reactions" Expr="engagement.reaction_count" Converter="Int"/>
    </Parse>
  </RestConnector>

  <RestConnector Id="URLEngagementBatch" Title="URL Engagement Batch" HelpText="Engagement for multiple external URLs">
    <Parameters>
      <Text Id="Ids" Title="Multiple URLs (Max 50)" Required="true" Multiline="true"/>
    </Parameters>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.9?ids=@(FetchIdsBatch())
        &fields=engagement
        &access_token=@(Model.Authenticator.Token)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="$.*">
        <JsonPath Title="URL" Id="Url" Expr="id" Converter="String"/>
        <JsonPath Title="Shares" Id="Shares" Expr="engagement.share_count" Converter="Int"/>
        <JsonPath Title="Comments" Id="Comments" Expr="engagement.comment_count" Converter="Int"/>
        <JsonPath Title="Reactions" Id="Reactions" Expr="engagement.reaction_count" Converter="Int"/>
      </JsonPath>
    </Parse>
  </RestConnector>

  <RestConnector Id="Avatars" Title="Avatars" HelpText="Avatar Link for Page or User">
    <Parameters>
      <Text Id="Id" Title="Page or User Id" Required="true"/>
    </Parameters>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.9/@(Model.Id)/picture
        ?width=300&height=300&redirect=false
        &access_token=@(Model.Authenticator.Token)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Title="URL" Id="AvatarUrl" Expr="data.url" Converter="String"/>
    </Parse>
  </RestConnector>

  <RestConnector Id="UnknownIdType" Title="Unknown Id Type" HelpText="Determines the type from an unknown Id">
    <Parameters>
      <Text Id="Id" Title="Id" Debug.DefaultValue="" Required="true" HelpText=""/>
    </Parameters>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/?id=
        @(Model.Id)
				&fields=id,metadata
				&metadata=1
        &access_token=@(Model.Authenticator.Token)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
			<JsonPath Title="Type" Id="Type" Expr="metadata.type" Converter="String" Tag="id" HelpText=""/>
			<JsonPath Title="Id" Id="Id" Expr="id" Converter="String" Tag="id" HelpText=""/>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RestConnector Id="UnknownIdTypeBatch" Title="Unknown Id Type Batch" HelpText="Determines the type from unknown Ids">
    <Parameters>
      <Text Id="Ids" Title="Multiple Ids (Max 50)" Debug.DefaultValue="" Required="true" HelpText="" Multiline="true"/>
    </Parameters>
    <Fetch>
      <Fetch.Url>
        <![CDATA[
        https://graph.facebook.com/v2.8/?ids=
        @(FetchIdsBatch())
				&fields=id,metadata
				&metadata=1
        &access_token=@(Model.Authenticator.Token)
        ]]>
      </Fetch.Url>
    </Fetch>
    <Parse>
      <JsonPath Expr="$.*">
				<JsonPath Title="Type" Id="Type" Expr="metadata.type" Converter="String" Tag="id" HelpText=""/>
        <JsonPath Title="Id" Id="Id" Expr="id" Converter="String" Tag="id" HelpText=""/>
			</JsonPath>
    </Parse>
    <Fail>
      <JsonPath Expr="error.message"/>
    </Fail>
  </RestConnector>

  <RazorFunctions>
    <![CDATA[
      string SelectedFields() {
        string[] fields = ((string)Model.Fields).Split(',').Select(e => e.Trim().ToLower()).ToArray();
        return string.Join(",",((ResultField[])Model.Headers).Where(e => !string.IsNullOrEmpty(e.Tag) && fields.Contains(e.Identifier.ToLower())).Select(e => e.Tag).Distinct().ToArray());
      }
    string FetchIdsBatch()
    {
      string[] lines = ((string)Model.Ids).Trim().Split('\n').Select(e => e.Trim()).Where(e => !string.IsNullOrEmpty(e)).Take(50).ToArray();
      return string.Join(",",lines.Select((e, i) => Utils.UrlEncode(e)).ToArray());
    }
    ]]>
  </RazorFunctions>

</Suite>